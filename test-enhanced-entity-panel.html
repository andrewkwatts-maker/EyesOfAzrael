<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enhanced Entity Panel Demo - Eyes of Azrael</title>

  <!-- Base Styles -->
  <link rel="stylesheet" href="themes/theme-base.css">
  <link rel="stylesheet" href="styles.css">

  <!-- Entity Panel Styles -->
  <link rel="stylesheet" href="components/panels/panels.css">
  <link rel="stylesheet" href="components/panels/entity-panel-enhanced.css">

  <!-- Theme System -->
  <script defer src="themes/theme-picker.js"></script>
  <script defer src="themes/theme-animations.js"></script>

  <style>
    .demo-section {
      margin: 3rem 0;
      padding: 2rem;
      background: rgba(var(--color-background-rgb), 0.5);
      border-radius: var(--radius-xl);
      border: 2px solid rgba(var(--color-border-rgb), 0.3);
    }

    .demo-section h2 {
      margin-top: 0;
      color: var(--color-primary);
      border-bottom: 2px solid var(--color-primary);
      padding-bottom: 0.5rem;
    }

    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .code-block {
      background: rgba(0, 0, 0, 0.8);
      color: #10b981;
      padding: 1rem;
      border-radius: var(--radius-lg);
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      overflow-x: auto;
      margin: 1rem 0;
    }

    .feature-badge {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
      color: white;
      border-radius: var(--radius-full);
      font-size: 0.875rem;
      font-weight: 600;
      margin: 0.25rem;
    }
  </style>
</head>
<body>
  <div id="theme-picker-container"></div>

  <header>
    <div class="header-content">
      <h1>üé® Enhanced Entity Panel System</h1>
      <p>Interactive demonstration of entity panels with integrated corpus search</p>
    </div>
  </header>

  <nav class="breadcrumb">
    <a href="index.html">Home</a> ‚Üí <span>Enhanced Entity Panel Demo</span>
  </nav>

  <main>
    <!-- Features Overview -->
    <section class="demo-section">
      <h2>‚ú® Key Features</h2>
      <div>
        <span class="feature-badge">üìö Integrated Corpus Search</span>
        <span class="feature-badge">üåê Automatic Translation</span>
        <span class="feature-badge">üìä Archetype Scoring</span>
        <span class="feature-badge">üîó Cross-Cultural Links</span>
        <span class="feature-badge">üí´ Three Display Modes</span>
        <span class="feature-badge">üéØ Collapsible Sections</span>
        <span class="feature-badge">üîç Context-Aware Search</span>
        <span class="feature-badge">‚ö° Fast & Responsive</span>
      </div>

      <p style="margin-top: 1.5rem; color: var(--color-text-secondary);">
        The Enhanced Entity Panel automatically translates entity names to search ancient texts in their original
        languages, providing rich contextual information with minimal configuration.
      </p>
    </section>

    <!-- Full Display Mode -->
    <section class="demo-section">
      <h2>üìÑ Full Display Mode</h2>
      <p>Complete entity view with all details, corpus integration, and interactive elements</p>

      <div id="full-panel-container"></div>

      <div class="code-block">
// Initialize full entity panel<br>
const panel = new EnhancedEntityPanel({<br>
  &nbsp;&nbsp;entityId: 'staff-of-moses',<br>
  &nbsp;&nbsp;entityType: 'item',<br>
  &nbsp;&nbsp;displayMode: 'full',<br>
  &nbsp;&nbsp;mythology: 'jewish',<br>
  &nbsp;&nbsp;container: '#full-panel-container',<br>
  &nbsp;&nbsp;showCorpusIntegration: true,<br>
  &nbsp;&nbsp;autoLoadCorpus: false<br>
});<br>
await panel.load();
      </div>
    </section>

    <!-- Compact Display Mode -->
    <section class="demo-section">
      <h2>üóÇÔ∏è Compact Display Mode</h2>
      <p>Card-based view perfect for lists and grids</p>

      <div class="demo-grid">
        <div id="compact-panel-1"></div>
        <div id="compact-panel-2"></div>
        <div id="compact-panel-3"></div>
      </div>

      <div class="code-block">
// Multiple compact panels<br>
const items = ['mjolnir', 'gungnir', 'draupnir'];<br>
items.forEach((id, i) => {<br>
  &nbsp;&nbsp;const panel = new EnhancedEntityPanel({<br>
  &nbsp;&nbsp;&nbsp;&nbsp;entityId: id,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;entityType: 'item',<br>
  &nbsp;&nbsp;&nbsp;&nbsp;displayMode: 'compact',<br>
  &nbsp;&nbsp;&nbsp;&nbsp;mythology: 'norse',<br>
  &nbsp;&nbsp;&nbsp;&nbsp;container: `#compact-panel-${i + 1}`,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;showCorpusIntegration: true<br>
  &nbsp;&nbsp;});<br>
  &nbsp;&nbsp;panel.load();<br>
});
      </div>
    </section>

    <!-- Mini Display Mode -->
    <section class="demo-section">
      <h2>üìå Mini Display Mode</h2>
      <p>Inline references for seamless text integration</p>

      <p style="margin: 1.5rem 0; line-height: 1.8; color: var(--color-text-primary);">
        Moses used the <span id="mini-panel-1"></span> to part the Red Sea.
        The staff, also known as the <span id="mini-panel-2"></span>, demonstrated
        divine power through the <span id="mini-panel-3"></span>.
      </p>

      <div class="code-block">
// Inline mini panels<br>
new EnhancedEntityPanel({<br>
  &nbsp;&nbsp;entityId: 'staff-of-moses',<br>
  &nbsp;&nbsp;entityType: 'item',<br>
  &nbsp;&nbsp;displayMode: 'mini',<br>
  &nbsp;&nbsp;container: '#mini-panel-1'<br>
}).load();
      </div>
    </section>

    <!-- Corpus Integration Demo -->
    <section class="demo-section">
      <h2>üìö Corpus Search Integration</h2>

      <h3>How It Works</h3>
      <ol style="line-height: 1.8;">
        <li><strong>Entity Loading:</strong> Panel loads entity data including all alternative names</li>
        <li><strong>Language Detection:</strong> Identifies languages of enabled corpus texts</li>
        <li><strong>Auto-Translation:</strong> Translates entity name to each corpus language (e.g., "Moses" ‚Üí "ŒúœâœãœÉ·øÜœÇ" for Greek texts)</li>
        <li><strong>Multi-Term Search:</strong> Searches for original name + all translated variants</li>
        <li><strong>Result Aggregation:</strong> Combines results from all sources with proper attribution</li>
        <li><strong>Interactive Display:</strong> Shows collapsible sections with excerpts and reference links</li>
      </ol>

      <h3>Translation API Configuration</h3>
      <div class="code-block">
// In corpus-config.json<br>
"translation_settings": {<br>
  &nbsp;&nbsp;"enabled": true,<br>
  &nbsp;&nbsp;"api_provider": "mymemory",<br>
  &nbsp;&nbsp;"api_url": "https://api.mymemory.translated.net/get",<br>
  &nbsp;&nbsp;"cache_translations": true,<br>
  &nbsp;&nbsp;"cache_duration_days": 30,<br>
  &nbsp;&nbsp;"target_language": "en",<br>
  &nbsp;&nbsp;"search_strategy": {<br>
  &nbsp;&nbsp;&nbsp;&nbsp;"try_original_first": true,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;"try_translation_if_no_results": true,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;"try_transliteration_if_available": true<br>
  &nbsp;&nbsp;}<br>
}
      </div>
    </section>

    <!-- Usage Examples -->
    <section class="demo-section">
      <h2>üíª Usage Examples</h2>

      <h3>Basic Usage</h3>
      <div class="code-block">
// Simple entity display<br>
const panel = new EnhancedEntityPanel({<br>
  &nbsp;&nbsp;entityId: 'mjolnir',<br>
  &nbsp;&nbsp;entityType: 'item',<br>
  &nbsp;&nbsp;mythology: 'norse',<br>
  &nbsp;&nbsp;container: '#my-container'<br>
});<br>
await panel.load();
      </div>

      <h3>With Corpus Auto-Load</h3>
      <div class="code-block">
// Auto-load corpus references<br>
const panel = new EnhancedEntityPanel({<br>
  &nbsp;&nbsp;entityId: 'zeus',<br>
  &nbsp;&nbsp;entityType: 'deity',<br>
  &nbsp;&nbsp;mythology: 'greek',<br>
  &nbsp;&nbsp;container: '#deity-panel',<br>
  &nbsp;&nbsp;autoLoadCorpus: true  // Automatically search corpus<br>
});<br>
await panel.load();
      </div>

      <h3>Without Corpus Integration</h3>
      <div class="code-block">
// Disable corpus features<br>
const panel = new EnhancedEntityPanel({<br>
  &nbsp;&nbsp;entityId: 'concept-karma',<br>
  &nbsp;&nbsp;entityType: 'concept',<br>
  &nbsp;&nbsp;container: '#concept-panel',<br>
  &nbsp;&nbsp;showCorpusIntegration: false  // No corpus search UI<br>
});<br>
await panel.load();
      </div>
    </section>

    <!-- Performance Notes -->
    <section class="demo-section">
      <h2>‚ö° Performance & Caching</h2>

      <h3>Translation Caching</h3>
      <p>Translations are cached in-memory during the session and can be configured to persist:</p>
      <ul style="line-height: 1.8;">
        <li><strong>Session Cache:</strong> Automatic, no configuration needed</li>
        <li><strong>LocalStorage Cache:</strong> 30-day default (configurable)</li>
        <li><strong>Cache Invalidation:</strong> Automatic on entity updates</li>
      </ul>

      <h3>Corpus Search Optimization</h3>
      <ul style="line-height: 1.8;">
        <li><strong>Lazy Loading:</strong> Corpus results only load when requested</li>
        <li><strong>Parallel Requests:</strong> Multiple corpus files searched simultaneously</li>
        <li><strong>Result Limiting:</strong> First 3 excerpts per source (full results via link)</li>
        <li><strong>Smart Retries:</strong> Automatic fallback to alternative translation APIs</li>
      </ul>
    </section>

    <!-- Browser Support -->
    <section class="demo-section">
      <h2>üåê Browser Support</h2>
      <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
        <thead>
          <tr style="background: rgba(var(--color-primary-rgb), 0.2);">
            <th style="padding: 0.75rem; text-align: left; border: 1px solid var(--color-border);">Browser</th>
            <th style="padding: 0.75rem; text-align: left; border: 1px solid var(--color-border);">Min Version</th>
            <th style="padding: 0.75rem; text-align: left; border: 1px solid var(--color-border);">Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td style="padding: 0.75rem; border: 1px solid var(--color-border);">Chrome/Edge</td>
            <td style="padding: 0.75rem; border: 1px solid var(--color-border);">90+</td>
            <td style="padding: 0.75rem; border: 1px solid var(--color-border);">Full support</td>
          </tr>
          <tr>
            <td style="padding: 0.75rem; border: 1px solid var(--color-border);">Firefox</td>
            <td style="padding: 0.75rem; border: 1px solid var(--color-border);">88+</td>
            <td style="padding: 0.75rem; border: 1px solid var(--color-border);">Full support</td>
          </tr>
          <tr>
            <td style="padding: 0.75rem; border: 1px solid var(--color-border);">Safari</td>
            <td style="padding: 0.75rem; border: 1px solid var(--color-border);">14+</td>
            <td style="padding: 0.75rem; border: 1px solid var(--color-border);">Full support</td>
          </tr>
        </tbody>
      </table>
    </section>

  </main>

  <footer>
    <p>
      <strong>Enhanced Entity Panel System</strong> - Eyes of Azrael<br>
      <a href="index.html">Home</a> |
      <a href="ENTITY_SYSTEM_README.md">Documentation</a> |
      <a href="test-entity-panel.html">Basic Panel Demo</a>
    </p>
  </footer>

  <!-- Enhanced Entity Panel Script -->
  <script src="components/panels/entity-panel-enhanced.js"></script>

  <script>
    // Initialize demo panels when DOM is ready
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        // Full display example
        const fullPanel = new EnhancedEntityPanel({
          entityId: 'staff-of-moses',
          entityType: 'item',
          displayMode: 'full',
          mythology: 'jewish',
          container: '#full-panel-container',
          showCorpusIntegration: true,
          autoLoadCorpus: false
        });
        await fullPanel.load();

        // Compact display examples
        const compactItems = [
          { id: 'mjolnir', type: 'item', mythology: 'norse' },
          { id: 'gungnir', type: 'item', mythology: 'norse' },
          { id: 'draupnir', type: 'item', mythology: 'norse' }
        ];

        compactItems.forEach((item, i) => {
          const panel = new EnhancedEntityPanel({
            entityId: item.id,
            entityType: item.type,
            displayMode: 'compact',
            mythology: item.mythology,
            container: `#compact-panel-${i + 1}`,
            showCorpusIntegration: true
          });
          panel.load();
        });

        // Mini display examples
        const miniItems = [
          { id: 'staff-of-moses', type: 'item' },
          { id: 'rod-of-aaron', type: 'item' },
          { id: 'ten-plagues', type: 'concept' }
        ];

        miniItems.forEach((item, i) => {
          const panel = new EnhancedEntityPanel({
            entityId: item.id,
            entityType: item.type,
            displayMode: 'mini',
            container: `#mini-panel-${i + 1}`,
            showCorpusIntegration: false
          });
          panel.load();
        });

      } catch (error) {
        console.error('Error initializing demo panels:', error);
      }
    });
  </script>
</body>
</html>
