<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eyes of Azrael - World Mythos Explorer</title>
    <meta name="description" content="A comprehensive encyclopedia of world mythologies, magical systems, sacred herbalism, and spiritual traditions spanning 6000+ years of human history">
    <meta name="keywords" content="mythology, world religions, deities, gods, goddesses, magic systems, herbalism, spiritual traditions, ancient wisdom">
    <meta name="author" content="Eyes of Azrael">

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#9370DB">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Eyes of Azrael">

    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-192x192.png">

    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>

    <!-- CRITICAL CSS - Inlined for instant rendering -->
    <style>
/* Critical CSS - Inlined for instant rendering */
*{margin:0;padding:0;box-sizing:border-box}:root{--color-bg-primary:#0a0e27;--color-bg-secondary:#151a35;--color-bg-card:#1a1f3a;--color-bg-card-rgb:26,31,58;--color-text-primary:#f8f9fa;--color-text-secondary:#adb5bd;--color-text-muted:#6c757d;--color-primary:#8b7fff;--color-primary-rgb:139,127,255;--color-secondary:#ff7eb6;--color-secondary-rgb:255,126,182;--color-border-primary:#2a2f4a;--color-border-primary-rgb:42,47,74;--spacing-xs:.25rem;--spacing-sm:.5rem;--spacing-md:1rem;--spacing-lg:1.5rem;--spacing-xl:2rem;--transition-fast:.15s ease;--transition-base:.3s ease}body{font-family:Inter,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--color-bg-primary);color:var(--color-text-primary);line-height:1.6;min-height:100vh;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.site-header{position:sticky;top:0;z-index:9999;background:rgba(var(--color-bg-card-rgb),.95);backdrop-filter:blur(30px);border-bottom:1px solid rgba(var(--color-border-primary-rgb),.8);box-shadow:0 4px 20px rgba(0,0,0,.3)}.header-container{max-width:1400px;margin:0 auto;padding:.75rem 2rem;display:flex;align-items:center;justify-content:space-between;gap:2rem}.site-logo{font-size:1.5rem;font-weight:700;color:var(--color-text-primary);text-decoration:none;display:flex;align-items:center;gap:.5rem;flex-shrink:0}.main-nav{display:flex;align-items:center;gap:.5rem;flex:1;justify-content:center}.nav-link{color:var(--color-text-secondary);text-decoration:none;padding:.5rem 1rem;border-radius:8px;font-size:.95rem;font-weight:500;white-space:nowrap}.header-actions{display:flex;align-items:center;gap:1rem;flex-shrink:0}.icon-btn{background:rgba(var(--color-bg-card-rgb),.6);border:1px solid rgba(var(--color-border-primary-rgb),.6);color:var(--color-text-primary);width:44px;height:44px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.25rem}.view-container{max-width:1400px;margin:0 auto;padding:2rem;min-height:60vh}.loading-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;padding:3rem}.spinner-container{position:relative;width:80px;height:80px;margin-bottom:1.5rem}.spinner-ring{position:absolute;border:4px solid transparent;border-top-color:var(--color-primary);border-radius:50%;animation:spin 1.2s cubic-bezier(.5,0,.5,1) infinite}.spinner-ring:nth-child(1){width:80px;height:80px;animation-delay:0s}.spinner-ring:nth-child(2){width:60px;height:60px;top:10px;left:10px;border-top-color:var(--color-secondary);animation-delay:-.4s}.spinner-ring:nth-child(3){width:40px;height:40px;top:20px;left:20px;border-top-color:#51cf66;animation-delay:-.8s}@keyframes spin{to{transform:rotate(360deg)}}.loading-message{color:var(--color-text-secondary);font-size:1.1rem;font-weight:500}.skip-to-main{position:absolute;top:-100px;left:0;background:var(--color-primary);color:#fff;padding:.75rem 1.5rem;text-decoration:none;border-radius:0 0 8px 0;z-index:10000}.skip-to-main:focus{top:0}.site-footer{background:var(--color-bg-secondary);padding:2rem;text-align:center;border-top:1px solid var(--color-border-primary);margin-top:4rem}.footer-container{max-width:1400px;margin:0 auto}.footer-links{display:flex;gap:1.5rem;justify-content:center;margin-top:1rem}.footer-links a{color:var(--color-primary);text-decoration:none}@media (max-width:768px){.header-container{padding:.75rem 1rem;flex-wrap:wrap}.main-nav{order:3;width:100%;justify-content:flex-start}.view-container{padding:1rem}}
    </style>

    <!-- Preload critical fonts -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"></noscript>

    <!-- Defer non-critical CSS -->
    <link rel="preload" href="css/skeleton-screens.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="css/skeleton-screens.css"></noscript>

    <!-- Lazy load other CSS files -->
    <link rel="preload" href="themes/theme-base.css" as="style">
    <link rel="preload" href="css/home-view.css" as="style">

    <!-- Firebase SDK (async) -->
    <link rel="preload" href="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js" as="script">
    <link rel="preload" href="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js" as="script">
    <link rel="preload" href="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js" as="script">
</head>
<body>
    <!-- Skip to main content (Accessibility) -->
    <a href="#main-content" class="skip-to-main">Skip to main content</a>

    <!-- Site Header -->
    <header class="site-header">
        <div class="header-container">
            <a href="#/" class="site-logo">üëÅÔ∏è Eyes of Azrael</a>

            <nav class="main-nav">
                <a href="#/" class="nav-link">Home</a>
                <a href="#/search" class="nav-link">Search</a>
                <a href="#/compare" class="nav-link">Compare</a>
                <a href="#/dashboard" class="nav-link">My Contributions</a>
            </nav>

            <div class="header-actions">
                <button id="themeToggle" class="icon-btn" aria-label="Toggle theme">üåô</button>
                <div id="userInfo" class="user-info" style="display: none;">
                    <img id="userAvatar" class="user-avatar" src="" alt="User">
                    <span id="userName"></span>
                    <button id="signOutBtn" class="btn-secondary btn-sm">Sign Out</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Breadcrumb Navigation -->
    <div id="breadcrumb-nav" aria-label="Breadcrumb"></div>

    <!-- Main Content Container -->
    <main id="main-content" class="view-container" role="main">
        <!-- Initial loading state (replaced by lazy loader) -->
        <div class="loading-container">
            <div class="spinner-container">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <p class="loading-message">Initializing...</p>
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-container">
            <p>&copy; 2024 Eyes of Azrael. All rights reserved.</p>
            <div class="footer-links">
                <a href="#/about">About</a>
                <a href="#/privacy">Privacy</a>
                <a href="#/terms">Terms</a>
            </div>
        </div>
    </footer>

    <!-- Progressive Lazy Loader (loads first, orchestrates everything) -->
    <script src="js/lazy-loader.js"></script>

    <!-- Firebase SDK (deferred) -->
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <!-- Firebase Config (deferred) -->
    <script defer src="firebase-config.js"></script>

    <!-- Core Scripts (deferred, non-blocking) -->
    <script defer src="js/diagnostic-collector.js"></script>
    <script defer src="js/seo.js"></script>
    <script defer src="js/toast.js"></script>
    <script defer src="js/image-optimizer.js"></script>
    <script defer src="js/utils/loading-spinner.js"></script>
    <script defer src="js/app-coordinator.js"></script>

    <!-- Authentication (deferred) -->
    <script defer src="js/auth-guard-simple.js" type="module"></script>
    <script defer src="js/header-theme-picker.js"></script>
    <script defer src="js/auth-manager.js"></script>

    <!-- Component Scripts (deferred) -->
    <script defer src="js/page-asset-renderer.js"></script>
    <script defer src="js/views/home-view.js"></script>
    <script defer src="js/components/universal-display-renderer.js"></script>
    <script defer src="js/entity-renderer-firebase.js"></script>
    <script defer src="js/search-firebase.js"></script>
    <script defer src="js/spa-navigation.js"></script>
    <script defer src="js/theme-manager.js"></script>

    <!-- CRUD System (deferred) -->
    <script defer src="js/firebase-crud-manager.js"></script>
    <script defer src="js/components/entity-form.js"></script>
    <script defer src="js/components/user-dashboard.js"></script>

    <!-- App Initialization (deferred, loads last) -->
    <script defer src="js/app-init-simple.js"></script>

    <!-- Lazy load remaining CSS after critical content -->
    <script>
        // Load non-critical CSS after page load
        window.addEventListener('load', () => {
            const styles = [
                'themes/theme-base.css',
                'css/accessibility.css',
                'css/ui-components.css',
                'css/spinner.css',
                'css/universal-grid.css',
                'css/dynamic-views.css',
                'css/search-components.css',
                'css/shader-backgrounds.css',
                'css/panel-shaders.css',
                'css/entity-forms.css',
                'css/home-page.css',
                'css/header-user.css',
                'css/site-header.css',
                'css/home-view.css',
                'css/auth-guard.css',
                'css/header-theme-picker.css',
                'css/header-fix.css',
                'css/loading-spinner.css'
            ];

            styles.forEach((href, index) => {
                setTimeout(() => {
                    const link = document.createElement('link');
                    link.rel = 'stylesheet';
                    link.href = href;
                    document.head.appendChild(link);
                }, index * 50); // Stagger loading
            });
        });
    </script>

    <!-- Lazy load shader scripts (very low priority) -->
    <script>
        window.addEventListener('load', () => {
            setTimeout(() => {
                const script = document.createElement('script');
                script.src = 'js/shaders/shader-themes.js';
                script.defer = true;
                document.body.appendChild(script);
            }, 2000); // Wait 2 seconds after page load
        });
    </script>
</body>
</html>
