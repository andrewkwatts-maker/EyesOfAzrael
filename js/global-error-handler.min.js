!function(){"use strict";window.ErrorLog={errors:[],warnings:[],maxErrors:100,addError:function(e){this.errors.push({message:e.message||String(e),stack:e.stack||"",timestamp:(new Date).toISOString(),type:"error",url:window.location.href}),this.errors.length>this.maxErrors&&this.errors.shift()},addWarning:function(e){this.warnings.push({message:String(e),timestamp:(new Date).toISOString(),type:"warning",url:window.location.href}),this.warnings.length>this.maxErrors&&this.warnings.shift()},getErrors:function(){return this.errors},getWarnings:function(){return this.warnings},getAll:function(){return[...this.errors,...this.warnings].sort((e,n)=>new Date(n.timestamp)-new Date(e.timestamp))},clear:function(){this.errors=[],this.warnings=[]},exportLogs:function(){const e={errors:this.errors,warnings:this.warnings,userAgent:navigator.userAgent,url:window.location.href,timestamp:(new Date).toISOString()},n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),t=document.createElement("a");t.href=r,t.download=`error-log-${Date.now()}.json`,t.click(),URL.revokeObjectURL(r)}};const e="Firebase",n="ES6 Module",r="Network",t="Permission",o="DOM",s="Type Error",i="Reference Error",a="Syntax Error",c="Security";function d(o){const d=o.message||String(o),l=o.stack||"";return d.includes("Firebase")||d.includes("firestore")||d.includes("auth/")?e:d.includes("import")||d.includes("module")?n:d.includes("Failed to fetch")||d.includes("NetworkError")||d.includes("CORS")?r:d.includes("permission")||d.includes("Permission denied")?t:d.includes("null")||d.includes("undefined")||l.includes("querySelector")?"DOM":"TypeError"===o.name?s:"ReferenceError"===o.name?i:"SyntaxError"===o.name?a:d.includes("XSS")||d.includes("script")?c:"Unknown"}function l(e,n={}){const r=d(e),t=(new Date).toISOString();e.stack,n.source,n.line,n.column,window.ErrorLog.addError({...e,category:r,context:n,timestamp:t})}function u(r,t,o=!0){if(document.querySelector(".global-error-banner")){const e=document.querySelector(".global-error-banner .error-message");if(e&&e.textContent===r)return}const s=document.createElement("div");s.className="global-error-banner",s.style.cssText='\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            background: linear-gradient(135deg, #ff4444, #cc0000);\n            color: white;\n            padding: 16px 20px;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n            z-index: 999999;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n            animation: slideDown 0.3s ease-out;\n        ';const i=document.createElement("div");i.style.cssText="flex: 1; display: flex; align-items: center; gap: 12px;";const a=document.createElement("span");a.textContent="⚠️",a.style.cssText="font-size: 20px;";const c=document.createElement("div");c.style.cssText="flex: 1;";const d=document.createElement("div");d.textContent=t,d.style.cssText="font-size: 11px; opacity: 0.8; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;";const l=document.createElement("div");l.className="error-message",l.textContent=r,l.style.cssText="font-size: 14px; font-weight: 500;",c.appendChild(d),c.appendChild(l),i.appendChild(a),i.appendChild(c);const u=document.createElement("div");u.style.cssText="display: flex; gap: 8px;";const p=document.createElement("button");if(p.textContent="Refresh",p.style.cssText="\n            background: rgba(255, 255, 255, 0.2);\n            color: white;\n            border: 1px solid rgba(255, 255, 255, 0.3);\n            padding: 6px 12px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 13px;\n            font-weight: 500;\n            transition: background 0.2s;\n        ",p.onmouseover=()=>p.style.background="rgba(255, 255, 255, 0.3)",p.onmouseout=()=>p.style.background="rgba(255, 255, 255, 0.2)",p.onclick=()=>window.location.reload(),o){const e=document.createElement("button");e.textContent="×",e.style.cssText="\n                background: transparent;\n                color: white;\n                border: none;\n                font-size: 24px;\n                cursor: pointer;\n                padding: 0 8px;\n                opacity: 0.8;\n                transition: opacity 0.2s;\n            ",e.onmouseover=()=>e.style.opacity="1",e.onmouseout=()=>e.style.opacity="0.8",e.onclick=()=>s.remove(),u.appendChild(e)}u.insertBefore(p,u.firstChild),s.appendChild(i),s.appendChild(u);const g=document.createElement("style");g.textContent="\n            @keyframes slideDown {\n                from {\n                    transform: translateY(-100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateY(0);\n                    opacity: 1;\n                }\n            }\n        ",document.head.appendChild(g),document.body?document.body.insertBefore(s,document.body.firstChild):document.addEventListener("DOMContentLoaded",()=>{document.body.insertBefore(s,document.body.firstChild)}),o&&t!==e&&t!==n&&setTimeout(()=>{s.parentElement&&(s.style.animation="slideDown 0.3s ease-out reverse",setTimeout(()=>s.remove(),300))},1e4)}function p(p,g={},m=!0){if(l(p,g),m){const l=d(p),g=function(d,l){const u={[e]:"Database connection issue. Please check your internet connection and try again.",[n]:"Application loading error. Please clear your browser cache and refresh.",[r]:"Network error. Please check your internet connection.",[t]:"Access denied. You may need to sign in to view this content.",[o]:"Page rendering error. Please refresh the page.",[s]:"Application error. Our team has been notified.",[i]:"Application error. Please refresh the page.",[a]:"Code error detected. Please report this issue.",[c]:"Security error detected. Please refresh the page."},p=l.message||String(l);return p.includes("firebase is not defined")?"Firebase SDK failed to load. Please check your internet connection and refresh.":p.includes("Cannot use import statement")?"Application loading error. Please refresh the page.":p.includes("Firebase initialization timeout")?"Database connection timeout. Please refresh the page.":p.includes("permission-denied")||p.includes("insufficient permissions")?"You don't have permission to access this content. Please sign in.":p.includes("404")?"Resource not found. The page you're looking for may have been moved or deleted.":p.includes("QuotaExceeded")?"Storage quota exceeded. Please clear your browser data.":u[d]||"An unexpected error occurred. Please try refreshing the page."}(l,p);["ResizeObserver loop","Non-Error promise rejection","Script error."].some(e=>(p.message||String(p)).includes(e))||u(g,l,!(l===e||l===n||l===r))}if(window.gtag)try{window.gtag("event","exception",{description:p.message||String(p),fatal:!1})}catch(e){}}window.addEventListener("error",function(e){const n=e.error||new Error(e.message);p(n,{source:e.filename,line:e.lineno,column:e.colno}),["Cannot use import statement","firebase is not defined","ResizeObserver loop"].some(e=>n.message.includes(e))&&e.preventDefault()},!0),window.addEventListener("unhandledrejection",function(e){const n=e.reason||new Error("Unhandled Promise Rejection");n.isPromiseRejection=!0,p(n,{type:"unhandledrejection",promise:e.promise}),e.preventDefault()}),window.addEventListener("error",function(e){if(e.target!==window){const n=e.target,t=n.tagName||"";if(("SCRIPT"===t||"LINK"===t||"IMG"===t)&&(l(new Error(`Failed to load ${t.toLowerCase()}: ${n.src||n.href}`),{type:"resource",tagName:t,src:n.src||n.href}),"SCRIPT"===t)){const e=n.src||"";(e.includes("firebase")||e.includes("config"))&&u("Failed to load critical application files. Please refresh the page.",r,!1)}}},!0);const g=console.error;console.error=function(...e){if(g.apply(console,e),e.length>0){const n=e[0];n instanceof Error?window.ErrorLog.addError(n):"string"==typeof n&&n.toLowerCase().includes("error")&&window.ErrorLog.addWarning(e.join(" "))}};const m=console.warn;console.warn=function(...e){m.apply(console,e),window.ErrorLog.addWarning(e.join(" "))},window.debugErrors=function(){window.ErrorLog.errors.length>0&&window.ErrorLog.getErrors().slice(-10).forEach((e,n)=>{e.stack}),window.ErrorLog.warnings.length>0&&window.ErrorLog.getWarnings().slice(-10).forEach((e,n)=>{})},window.reportError=function(e,n){p(e,n,!0)},window.reportWarning=function(e){window.ErrorLog.addWarning(e)}}();