!function(){"use strict";async function e(){try{const e=firebase.initializeApp(firebaseConfig);window.EyesOfAzrael.db=firebase.firestore(),window.EyesOfAzrael.auth=new AuthManager(e),await new Promise((e,n)=>{const a=firebase.auth().onAuthStateChanged(n=>{n?(e(n),a()):setTimeout(()=>{firebase.auth().currentUser||(window.location.href="/login.html")},500)})}),window.EyesOfAzrael.renderer=new UniversalDisplayRenderer({enableHover:!0,enableExpand:!0,enableCorpusLinks:!0}),window.EyesOfAzrael.navigation=new SPANavigation(window.EyesOfAzrael.db,window.EyesOfAzrael.auth,window.EyesOfAzrael.renderer),window.EyesOfAzrael.search=new EnhancedCorpusSearch(window.EyesOfAzrael.db),window.EyesOfAzrael.shaders=new ShaderThemeManager({quality:"auto",targetFPS:60,enableStats:!1}),n(),window.EyesOfAzrael.auth.initAuthUI(),function(){const e=document.getElementById("themeToggle");if(e){let n="true"===localStorage.getItem("darkMode");const a=()=>{n?(document.body.classList.add("dark-mode"),e.textContent="â˜€ï¸"):(document.body.classList.remove("dark-mode"),e.textContent="ðŸŒ™"),localStorage.setItem("darkMode",n)};e.addEventListener("click",()=>{n=!n,a()}),a()}const n=document.getElementById("shader-menu");if(n){const e=[{id:"water",name:"Water",icon:"ðŸŒŠ"},{id:"fire",name:"Fire",icon:"ðŸ”¥"},{id:"night",name:"Night",icon:"ðŸŒ™"},{id:"day",name:"Day",icon:"â˜€ï¸"},{id:"earth",name:"Earth",icon:"ðŸŒ¿"},{id:"air",name:"Air",icon:"ðŸ’¨"},{id:"light",name:"Light",icon:"âœ¨"},{id:"dark",name:"Dark",icon:"ðŸŒ‘"},{id:"order",name:"Order",icon:"âšœï¸"},{id:"chaos",name:"Chaos",icon:"ðŸ•³ï¸"}];n.innerHTML=e.map(e=>`\n                <button class="shader-theme-btn" data-theme="${e.id}">\n                    ${e.icon} ${e.name}\n                </button>\n            `).join(""),n.addEventListener("click",e=>{if(e.target.classList.contains("shader-theme-btn")){const n=e.target.dataset.theme;window.EyesOfAzrael.shaders.activate(n),localStorage.setItem("preferredShaderTheme",n)}})}}(),window.EyesOfAzrael.search.prefetchPopularEntities().catch(console.error)}catch(e){!function(e){const n=document.getElementById("main-content");n&&(n.innerHTML=`\n                <div class="error-container">\n                    <h1>Initialization Error</h1>\n                    <p>${e.message}</p>\n                    <button onclick="location.reload()" class="btn-primary">Reload Page</button>\n                </div>\n            `)}(e)}}function n(){const e=localStorage.getItem("preferredShaderTheme");if(e)return void window.EyesOfAzrael.shaders.activate(e);const n=window.location.hash;let a=null;if(n.includes("greek"))a="water";else if(n.includes("norse"))a="night";else if(n.includes("egyptian"))a="day";else if(n.includes("hindu")||n.includes("buddhist"))a="order";else if(n.includes("celtic"))a="earth";else if(n.includes("babylonian")||n.includes("sumerian"))a="chaos";else{const e=(new Date).getHours();a=e>=6&&e<18?"day":"night"}window.EyesOfAzrael.shaders.activate(a,{intensity:.7,speed:1})}window.EyesOfAzrael={auth:null,navigation:null,search:null,renderer:null,shaders:null,db:null},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),window.addEventListener("hashchange",()=>{localStorage.getItem("preferredShaderTheme")||n()}),window.debugApp=function(){return{auth:window.EyesOfAzrael.auth,navigation:window.EyesOfAzrael.navigation,search:window.EyesOfAzrael.search,renderer:window.EyesOfAzrael.renderer,shaders:window.EyesOfAzrael.shaders,db:window.EyesOfAzrael.db}}}();