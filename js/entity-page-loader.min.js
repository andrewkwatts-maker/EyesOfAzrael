!function(){"use strict";function e(){(document.querySelector('[data-entity-page="true"]')||document.querySelector('meta[name="entity-type"]'))&&function(e=5e3){return new Promise((t,n)=>{const o=Date.now();!function i(){window.firebaseDb?t():Date.now()-o>e?n(new Error("Firebase initialization timeout")):setTimeout(i,100)}()})}().then(()=>{!async function(){const e=function(){const e=document.querySelector('meta[name="mythology"]'),t=document.querySelector('meta[name="entity-type"]'),n=document.querySelector('meta[name="entity-id"]');if(e&&t&&n)return{mythology:e.content,type:t.content,id:n.content,collection:t.content+"s"};const o=document.querySelector('main[data-entity-page="true"]');return o?{mythology:o.dataset.mythology,type:o.dataset.entityType,id:o.dataset.entityId,collection:o.dataset.entityType+"s"}:null}();if(e)try{const t=window.firebaseDb,n=`${e.mythology}_${e.id}`,o=t.collection(e.collection).doc(n),i=await o.get();i.exists&&(function(e){if(e.name){const t=document.querySelector("h1");t&&e.icon&&(t.innerHTML=`${e.icon} ${e.name}`)}if(e.subtitle||e.title){const t=document.querySelector(".hero-section .subtitle");t&&(t.textContent=e.subtitle||e.title)}if(e.description){const t=document.querySelector(".hero-section p:not(.subtitle)");t&&(t.textContent=e.description)}(function(e){document.querySelectorAll("[data-attribute-grid]").forEach(t=>{const n=t.querySelector(".loading-placeholder");if(!n)return;const o=function(e){const t=[],n=["id","name","type","mythology","description","icon","subtitle","title","related","relationships","tags","createdAt","updatedAt","userId","userName"];for(const[o,i]of Object.entries(e)){if(n.includes(o))continue;if(null==i||""===i)continue;const e=o.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim();let a=i;Array.isArray(i)?a=i.join(", "):"object"==typeof i&&(a=JSON.stringify(i)),a&&t.push({label:e,value:a})}return t}(e);o.length>0?(t.innerHTML="",o.forEach(e=>{const n=function(e,t){const n=document.createElement("div");return n.className="subsection-card",n.innerHTML=`\n            <div class="attribute-label">${e}</div>\n            <div class="attribute-value">${t}</div>\n        `,n}(e.label,e.value);t.appendChild(n)})):n.textContent="No additional attributes available"})})(e),(e.related||e.relationships)&&(e.related||e.relationships),e.tags&&function(e){const t=document.querySelector("main");if(!t)return;if(document.querySelector(".entity-tags"))return;const n=document.createElement("div");n.className="entity-tags",n.style.cssText="margin-top: 2rem; display: flex; flex-wrap: wrap; gap: 0.5rem;",e.forEach(e=>{const t=document.createElement("span");t.className="tag-badge",t.textContent=e,t.style.cssText="\n                background: var(--color-primary, #9370DB);\n                color: white;\n                padding: 0.25rem 0.75rem;\n                border-radius: 1rem;\n                font-size: 0.85rem;\n                font-weight: 500;\n            ",n.appendChild(t)});const o=document.querySelector("footer");o?o.parentNode.insertBefore(n,o):t.appendChild(n)}(e.tags)}(i.data()),function(){const e=document.createElement("div");e.className="firebase-indicator",e.innerHTML="âš¡ Enhanced with live data",e.style.cssText="\n            position: fixed;\n            bottom: 20px;\n            right: 20px;\n            background: rgba(147, 112, 219, 0.9);\n            color: white;\n            padding: 0.5rem 1rem;\n            border-radius: 2rem;\n            font-size: 0.75rem;\n            font-weight: 600;\n            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n            z-index: 1000;\n            opacity: 0;\n            animation: fadeInOut 3s ease-in-out;\n        ";const t=document.createElement("style");t.textContent="\n            @keyframes fadeInOut {\n                0%, 100% { opacity: 0; }\n                10%, 90% { opacity: 1; }\n            }\n        ",document.head.appendChild(t),document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}())}catch(e){}}()}).catch(e=>{})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();