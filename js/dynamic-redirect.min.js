!function(){"use strict";const e={enableAutoRedirect:!0,redirectDelay:100,preferenceKey:"eyesofazrael_prefer_dynamic",isBot:/bot|crawler|spider|crawling/i.test(navigator.userAgent),debug:!0};function n(n,t){e.debug}function t(){try{return localStorage.getItem(e.preferenceKey)}catch(e){return n(),null}}function o(t){try{localStorage.setItem(e.preferenceKey,t?"true":"false"),n()}catch(e){n()}}function r(){const e=window.location.pathname.match(/\/mythos\/([^\/]+)\/([^\/]+)\/([^\/]+)\.html$/);if(e){const n=e[1],t=e[2],o=e[3];return{mythology:n,type:t.endsWith("s")?t.slice(0,-1):t,id:o}}const t=document.querySelector('meta[name="mythology"]'),o=document.querySelector('meta[name="entity-type"]'),r=document.querySelector('meta[name="entity-id"]');if(t&&o&&r)return{mythology:t.content,type:o.content,id:r.content};const a=document.title.match(/^([^-]+)\s*-\s*([^-]+)/);return a?{mythology:null,type:null,id:a[1].trim().toLowerCase().replace(/\s+/g,"-")}:(n(),null)}function a(e){if(!e)return null;const n=new URLSearchParams;return e.type&&n.set("type",e.type),e.id&&n.set("id",e.id),e.mythology&&n.set("mythology",e.mythology),`/entity-dynamic.html?${n.toString()}`}function i(){const t=a(r());if(!t)return void n();n();const o=new URL(t,window.location.origin);o.searchParams.set("from","static"),setTimeout(()=>{window.location.href=o.toString()},e.redirectDelay)}function c(){if(window.location.pathname.includes("entity-dynamic.html"))return;if(document.getElementById("dynamic-version-toggle"))return;const e=r();if(!e)return;const t=a(e);if(!t)return;const i=document.createElement("a");i.id="dynamic-version-toggle",i.href=t,i.className="dynamic-version-btn",i.innerHTML='\n            <span class="dynamic-btn-icon">ðŸ”„</span>\n            <span class="dynamic-btn-text">Load Dynamic Version</span>\n        ',i.onclick=function(e){e.preventDefault(),o(!0),window.location.href=t};const c=document.createElement("style");c.textContent="\n            .dynamic-version-btn {\n                position: fixed;\n                bottom: 2rem;\n                left: 2rem;\n                padding: var(--spacing-md, 0.75rem) var(--spacing-lg, 1rem);\n                background: rgba(var(--color-secondary-rgb, 100, 200, 100), 0.9);\n                backdrop-filter: blur(10px);\n                border: 2px solid var(--color-secondary, #64c864);\n                border-radius: var(--radius-lg, 12px);\n                color: white;\n                font-weight: 600;\n                text-decoration: none;\n                box-shadow: var(--shadow-lg, 0 10px 25px rgba(0,0,0,0.3));\n                transition: all 0.3s ease;\n                z-index: 1000;\n                display: flex;\n                align-items: center;\n                gap: 0.5rem;\n                font-size: 0.9rem;\n            }\n\n            .dynamic-version-btn:hover {\n                transform: translateY(-2px);\n                box-shadow: var(--shadow-xl, 0 15px 35px rgba(0,0,0,0.4));\n                background: rgba(var(--color-secondary-rgb, 100, 200, 100), 1);\n            }\n\n            .dynamic-btn-icon {\n                font-size: 1.2rem;\n            }\n\n            @media (max-width: 768px) {\n                .dynamic-version-btn {\n                    bottom: 1rem;\n                    left: 1rem;\n                    padding: 0.5rem 0.75rem;\n                    font-size: 0.8rem;\n                }\n\n                .dynamic-btn-text {\n                    display: none;\n                }\n            }\n        ",document.head.appendChild(c),document.body.appendChild(i),n()}window.DynamicRedirect={enable:()=>{e.enableAutoRedirect=!0,o(!0),n()},disable:()=>{e.enableAutoRedirect=!1,o(!1),n()},toggle:()=>{o(!("false"!==t())),window.location.reload()},redirectNow:i,getPreference:t,setPreference:o},n(),"static"!==new URLSearchParams(window.location.search).get("from")?(function(){if(e.isBot)return;const n=document.createElement("div");n.style.display="none",n.setAttribute("data-dynamic-version-available","true"),n.setAttribute("data-content-source","firebase"),document.body.appendChild(n);const t=document.createElement("script");t.type="application/ld+json";const o=r();if(o){const e=a(o);t.textContent=JSON.stringify({"@context":"https://schema.org","@type":"WebPage",url:window.location.href,alternateName:"Dynamic Firebase Version",relatedLink:e}),document.head.appendChild(t)}}(),(e.enableAutoRedirect?e.isBot||"false"===t()||window.location.pathname.includes("entity-dynamic.html")?(n(),0):r()||(n(),0):(n(),0))?i():("loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c(),n())):n()}();