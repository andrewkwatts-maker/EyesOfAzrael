class LoadingSpinnerManager{constructor(){this.activeSpinners=new Map,this.timeouts=new Map}show(e,n={}){const{message:t="Loading...",size:i="medium",timeout:s=1e4,onTimeout:r=null,inline:a=!1,className:o=""}=n,d=document.getElementById(e);if(!d)return null;const c=`spinner-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l=a?null:d.innerHTML,h=this.getSpinnerHTML(t,i,c,o);if(a){const e=document.createElement("div");e.className="loading-spinner-inline",e.innerHTML=h,d.appendChild(e)}else d.innerHTML=h;if(this.activeSpinners.set(c,{containerId:e,originalContent:l,inline:a,startTime:Date.now()}),s>0){const e=setTimeout(()=>{this.hide(c),r&&r()},s);this.timeouts.set(c,e)}return c}hide(e,n=null){if(!this.activeSpinners.has(e))return;const t=this.activeSpinners.get(e),i=document.getElementById(t.containerId);if(i){if(this.timeouts.has(e)&&(clearTimeout(this.timeouts.get(e)),this.timeouts.delete(e)),Date.now(),t.startTime,t.inline){const n=i.querySelector(`[data-spinner-id="${e}"]`);n&&n.remove()}else n?i.innerHTML=n:t.originalContent?i.innerHTML=t.originalContent:i.innerHTML="";this.activeSpinners.delete(e)}else this.activeSpinners.delete(e)}updateMessage(e,n){if(!this.activeSpinners.has(e))return;const t=this.activeSpinners.get(e),i=document.getElementById(t.containerId);if(!i)return;const s=i.querySelector(`[data-spinner-id="${e}"] .spinner-message`);s&&(s.textContent=n)}getSpinnerHTML(e,n,t,i=""){return`\n            <div class="loading-spinner-wrapper ${i}" data-spinner-id="${t}">\n                <div class="loading-spinner spinner-${n}">\n                    <div class="spinner-icon"></div>\n                </div>\n                ${e?`<p class="spinner-message">${e}</p>`:""}\n            </div>\n        `}async wrapPromise(e,n,t={}){const i=this.show(e,t);try{const e=await n;return this.hide(i),e}catch(e){throw this.hide(i),e}}async wrapAll(e,n,t={}){const{message:i="Loading...",progressUpdates:s=!1}=t,r=this.show(e,{...t,message:i});if(s){let e=0;const t=n.length,i=n.map(async n=>{const i=await n;return e++,this.updateMessage(r,`Loading... (${e}/${t})`),i});try{const e=await Promise.all(i);return this.hide(r),e}catch(e){throw this.hide(r),e}}else try{const e=await Promise.all(n);return this.hide(r),e}catch(e){throw this.hide(r),e}}clearAll(){for(const e of this.activeSpinners.keys())this.hide(e)}getActiveCount(){return this.activeSpinners.size}}const loadingSpinner=new LoadingSpinnerManager;"undefined"!=typeof module&&module.exports&&(module.exports=loadingSpinner),window.loadingSpinner=loadingSpinner;