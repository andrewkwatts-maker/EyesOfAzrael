class FilterHeaderButton{constructor(){this.button=null,this.badge=null,this.init()}init(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.createButton()):this.createButton(),window.addEventListener("contentFilterChanged",t=>{this.updateBadge()})}createButton(){let t=document.querySelector("header .header-content");if(!t&&(t=document.querySelector("header"),!t))return;const e='\n            <button id="filter-settings-btn" class="filter-header-btn" title="Content Filter Settings" aria-label="Content Filter Settings">\n                <span class="filter-btn-icon">ğŸ›ï¸</span>\n                <span class="filter-btn-label">Filter</span>\n                <span class="filter-btn-badge" id="filter-badge" style="display: none;">0</span>\n            </button>\n        ';let n=t.querySelector("nav, .header-nav, .header-controls");if(n)n.insertAdjacentHTML("beforeend",e);else{const n=document.createElement("div");n.className="header-controls",n.innerHTML=e,t.appendChild(n)}this.button=document.getElementById("filter-settings-btn"),this.badge=document.getElementById("filter-badge"),this.button&&this.button.addEventListener("click",()=>{window.filterSettingsModal&&window.filterSettingsModal.open()}),this.updateBadge()}updateBadge(){if(!this.badge||!window.contentFilter)return;const t=window.contentFilter.getStats(),e=t.hiddenUsersCount+t.hiddenTopicsCount+t.hiddenSubtopicsCount;if(e>0?(this.badge.textContent=e,this.badge.style.display="flex"):this.badge.style.display="none",this.button){const t=window.contentFilter.getModeLabel();this.button.title=`Content Filter: ${t}`}}}new FilterHeaderButton;