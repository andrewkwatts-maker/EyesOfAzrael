class SubmissionLink{static CONTEXT_PATTERNS=[{pattern:/\/deities\//i,context:"deity",label:"Add Deity",icon:"âž•"},{pattern:/\/heroes\//i,context:"hero",label:"Add Hero",icon:"âž•"},{pattern:/\/creatures\//i,context:"creature",label:"Add Creature",icon:"âž•"},{pattern:/\/texts\//i,context:"text",label:"Add Text",icon:"âž•"},{pattern:/\/teachings\//i,context:"teaching",label:"Add Teaching",icon:"âž•"},{pattern:/\/theology\//i,context:"theology",label:"Add Theology",icon:"âž•"},{pattern:/\/lineage\//i,context:"lineage",label:"Add Lineage",icon:"âž•"},{pattern:/\/mythos\/(christian|jewish|greek|norse|egyptian)/i,context:"mythology",label:"Submit Content",icon:"âž•"},{pattern:/\/theories\//i,context:"theory",label:"Submit Theory",icon:"ðŸ“"}];static DEFAULT_SUBMISSION_URL="/theories/user-submissions/submit.html";constructor(t={}){this.options={style:t.style||"fab",label:t.label||null,icon:t.icon||null,context:t.context||null,url:t.url||null,className:t.className||""},this.options.context||(this.options.context=this.detectContext()),this.setContextualDefaults(),this.element=this.createElement()}detectContext(){const t=window.location.pathname;for(const e of SubmissionLink.CONTEXT_PATTERNS)if(e.pattern.test(t))return{type:e.context,label:e.label,icon:e.icon};return{type:"general",label:"Contribute",icon:"âž•"}}setContextualDefaults(){"object"==typeof this.options.context&&(this.options.label||(this.options.label=this.options.context.label),this.options.icon||(this.options.icon=this.options.context.icon)),this.options.label||(this.options.label="Contribute"),this.options.icon||(this.options.icon="âž•")}getSubmissionUrl(){if(this.options.url)return this.options.url;const t=(window.location.pathname.match(/\//g)||[]).length-1;return`${t>0?"../".repeat(t):"./"}theories/user-submissions/submit.html`}createElement(){const t=this.getSubmissionUrl(),{style:e,label:n,icon:i,className:s}=this.options,o=document.createElement("a");return o.href=t,o.className=`submission-link submission-link--${e} ${s}`.trim(),o.setAttribute("aria-label",n),"fab"===e?(o.innerHTML=`\n                    <span class="submission-link__icon">${i}</span>\n                    <span class="submission-link__label">${n}</span>\n                `,o.setAttribute("title",n)):o.innerHTML=`\n                    <span class="submission-link__icon">${i}</span>\n                    <span class="submission-link__text">${n}</span>\n                `,o}appendTo(t){return t.appendChild(this.element),this}static render(t={}){return new SubmissionLink(t).element.outerHTML}static isSubmissionPage(){const t=window.location.pathname;return t.includes("/submit.html")||t.includes("/edit.html")}static autoInject(t={}){if(this.isSubmissionPage())return null;if(document.querySelector(".submission-link--fab"))return null;const e=()=>{const e={style:"fab",...t},n=new SubmissionLink(e);return document.body.appendChild(n.element),setTimeout(()=>{n.element.classList.add("submission-link--pulse")},1e3),n};return"loading"===document.readyState?(document.addEventListener("DOMContentLoaded",e),null):e()}static createInline(t={}){return new SubmissionLink({...t,style:"inline"}).element}static createDropdownItem(t={}){return new SubmissionLink({...t,style:"dropdown"}).element}static createCardButton(t={}){return new SubmissionLink({...t,style:"card"}).element}static removeAll(){document.querySelectorAll(".submission-link").forEach(t=>t.remove())}static updateAll(t={}){document.querySelectorAll(".submission-link").forEach(e=>{const n=Array.from(e.classList).find(t=>t.startsWith("submission-link--"))?.replace("submission-link--",""),i=new SubmissionLink({...t,style:n});e.replaceWith(i.element)})}}"undefined"!=typeof module&&module.exports&&(module.exports=SubmissionLink),window.SubmissionLink=SubmissionLink;