!function(){"use strict";function t(){const t=()=>{const t=window.EyesOfAzrael?.db;t&&"undefined"!=typeof EntityQuickViewModal&&document.addEventListener("click",e)};window.EyesOfAzrael?.db?t():document.addEventListener("app-initialized",t,{once:!0})}function e(t){const e=t.target.closest(".entity-card, .mythology-card, .deity-card, .hero-card, .creature-card, .panel-card, .related-entity-card");if(!e)return;if(t.target.matches("a, button, input, select, textarea, .edit-icon-btn, .delete-btn, .btn-primary, .btn-secondary"))return;if(t.target.closest("a, button, .edit-icon-btn, .delete-btn"))return;const n=e.dataset.entityId||e.dataset.id,a=e.dataset.collection||e.dataset.type,o=e.dataset.mythology;n&&a&&(t.preventDefault(),t.stopPropagation(),function(t,e,n){const a=window.EyesOfAzrael?.db;if(a){if("undefined"==typeof EntityQuickViewModal){const a=`#/mythology/${n}/${e}/${t}`;return void(window.location.hash=a)}try{new EntityQuickViewModal(a).open(t,e,n||"unknown")}catch(a){const o=`#/mythology/${n}/${e}/${t}`;window.location.hash=o}}}(n,a,o))}function n(){document.querySelectorAll(".entity-card, .mythology-card, .deity-card, .hero-card, .creature-card, .panel-card").forEach(t=>{if(t.dataset.entityId&&t.dataset.collection&&t.dataset.mythology)return;const e=t.href||t.querySelector("a")?.href;if(e){const n=e.match(/#?\/mythology\/([^\/]+)\/([^\/]+)\/([^\/]+)/);n&&(t.dataset.mythology=t.dataset.mythology||n[1],t.dataset.collection=t.dataset.collection||n[2],t.dataset.entityId=t.dataset.entityId||n[3])}})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),setInterval(n,2e3),window.EntityCardQuickView={initialize:t,enrichCards:n}}();