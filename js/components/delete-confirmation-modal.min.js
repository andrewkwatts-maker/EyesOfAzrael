class DeleteConfirmationModal{constructor(){this.modal=null,this.currentTheoryId=null,this.onConfirmCallback=null,this.init()}init(){this.createModal(),this.attachEventListeners()}createModal(){const n=document.createElement("div");n.innerHTML='\n            <div id="delete-confirmation-modal" class="modal-overlay" style="display: none;">\n                <div class="modal-container">\n                    <div class="modal-header">\n                        <h2 class="modal-title">Delete Theory</h2>\n                        <button class="modal-close" aria-label="Close modal">&times;</button>\n                    </div>\n\n                    <div class="modal-body">\n                        <div class="delete-warning">\n                            <div class="warning-icon">⚠️</div>\n                            <h3>Are you sure you want to delete this theory?</h3>\n                            <p>This action cannot be undone. All data associated with this theory will be permanently deleted, including:</p>\n                            <ul>\n                                <li>Theory content and images</li>\n                                <li>All votes and voting history</li>\n                                <li>All comments and discussions</li>\n                                <li>View statistics</li>\n                            </ul>\n                        </div>\n\n                        <div id="delete-error" class="error-message" style="display: none;"></div>\n                    </div>\n\n                    <div class="modal-footer">\n                        <button class="btn btn-cancel" id="delete-cancel-btn">\n                            Cancel\n                        </button>\n                        <button class="btn btn-danger" id="delete-confirm-btn">\n                            Delete Forever\n                        </button>\n                    </div>\n                </div>\n            </div>\n        ',document.body.appendChild(n.firstElementChild),this.modal=document.getElementById("delete-confirmation-modal"),this.injectStyles()}injectStyles(){const n=document.createElement("style");n.textContent="\n            .modal-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background: rgba(0, 0, 0, 0.85);\n                backdrop-filter: blur(10px);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                z-index: 10000;\n                animation: fadeIn 0.2s ease-out;\n            }\n\n            @keyframes fadeIn {\n                from {\n                    opacity: 0;\n                }\n                to {\n                    opacity: 1;\n                }\n            }\n\n            @keyframes slideUp {\n                from {\n                    transform: translateY(20px);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateY(0);\n                    opacity: 1;\n                }\n            }\n\n            .modal-container {\n                background: linear-gradient(135deg, rgba(20, 20, 40, 0.98) 0%, rgba(30, 20, 50, 0.98) 100%);\n                border: 2px solid rgba(147, 51, 234, 0.4);\n                border-radius: 16px;\n                max-width: 600px;\n                width: 90%;\n                max-height: 90vh;\n                overflow-y: auto;\n                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n                animation: slideUp 0.3s ease-out;\n            }\n\n            .modal-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 1.5rem 2rem;\n                border-bottom: 2px solid rgba(147, 51, 234, 0.3);\n            }\n\n            .modal-title {\n                margin: 0;\n                font-size: 1.5rem;\n                color: var(--accent-purple, #9333ea);\n            }\n\n            .modal-close {\n                background: none;\n                border: none;\n                font-size: 2rem;\n                color: rgba(255, 255, 255, 0.6);\n                cursor: pointer;\n                padding: 0;\n                width: 40px;\n                height: 40px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border-radius: 8px;\n                transition: all 0.2s ease;\n            }\n\n            .modal-close:hover {\n                background: rgba(255, 255, 255, 0.1);\n                color: white;\n            }\n\n            .modal-body {\n                padding: 2rem;\n            }\n\n            .delete-warning {\n                text-align: center;\n                color: rgba(255, 255, 255, 0.9);\n            }\n\n            .warning-icon {\n                font-size: 4rem;\n                margin-bottom: 1rem;\n                animation: pulse 2s ease-in-out infinite;\n            }\n\n            @keyframes pulse {\n                0%, 100% {\n                    transform: scale(1);\n                }\n                50% {\n                    transform: scale(1.1);\n                }\n            }\n\n            .delete-warning h3 {\n                margin-bottom: 1rem;\n                font-size: 1.3rem;\n                color: #ef4444;\n            }\n\n            .delete-warning p {\n                margin-bottom: 1rem;\n                line-height: 1.6;\n                opacity: 0.9;\n            }\n\n            .delete-warning ul {\n                text-align: left;\n                max-width: 400px;\n                margin: 1rem auto;\n                padding-left: 1.5rem;\n                opacity: 0.8;\n            }\n\n            .delete-warning li {\n                margin-bottom: 0.5rem;\n            }\n\n            .modal-footer {\n                display: flex;\n                gap: 1rem;\n                justify-content: flex-end;\n                padding: 1.5rem 2rem;\n                border-top: 2px solid rgba(147, 51, 234, 0.3);\n            }\n\n            .btn {\n                padding: 0.75rem 2rem;\n                border: none;\n                border-radius: 8px;\n                font-size: 1rem;\n                font-weight: 600;\n                cursor: pointer;\n                transition: all 0.3s ease;\n            }\n\n            .btn-cancel {\n                background: rgba(255, 255, 255, 0.1);\n                color: white;\n                border: 2px solid rgba(147, 51, 234, 0.3);\n            }\n\n            .btn-cancel:hover {\n                background: rgba(255, 255, 255, 0.15);\n                border-color: rgba(147, 51, 234, 0.5);\n            }\n\n            .btn-danger {\n                background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\n                color: white;\n                border: 2px solid #dc2626;\n            }\n\n            .btn-danger:hover {\n                background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);\n                transform: translateY(-2px);\n                box-shadow: 0 8px 24px rgba(239, 68, 68, 0.4);\n            }\n\n            .btn-danger:active {\n                transform: translateY(0);\n            }\n\n            .btn:disabled {\n                opacity: 0.5;\n                cursor: not-allowed;\n                transform: none !important;\n            }\n\n            .error-message {\n                background: rgba(239, 68, 68, 0.2);\n                border: 2px solid rgba(239, 68, 68, 0.5);\n                border-radius: 8px;\n                padding: 1rem;\n                margin-top: 1rem;\n                color: #fca5a5;\n            }\n        ",document.head.appendChild(n)}attachEventListeners(){this.modal.querySelector(".modal-close").addEventListener("click",()=>this.hide()),document.getElementById("delete-cancel-btn").addEventListener("click",()=>this.hide()),document.getElementById("delete-confirm-btn").addEventListener("click",()=>this.confirm()),this.modal.addEventListener("click",n=>{n.target===this.modal&&this.hide()}),document.addEventListener("keydown",n=>{"Escape"===n.key&&"none"!==this.modal.style.display&&this.hide()})}show(n,e=null){this.currentTheoryId=n,this.onConfirmCallback=e;const t=document.getElementById("delete-error");t.style.display="none",t.textContent="",this.modal.style.display="flex",document.body.style.overflow="hidden",setTimeout(()=>{document.getElementById("delete-cancel-btn").focus()},100)}hide(){this.modal.style.display="none",document.body.style.overflow="",this.currentTheoryId=null,this.onConfirmCallback=null}async confirm(){if(!this.currentTheoryId)return;const n=document.getElementById("delete-confirm-btn"),e=document.getElementById("delete-cancel-btn"),t=document.getElementById("delete-error");n.disabled=!0,e.disabled=!0,n.textContent="Deleting...";try{if(this.onConfirmCallback)await this.onConfirmCallback(this.currentTheoryId);else{if(!window.theoryOwnership)throw new Error("Deletion system not available");await window.theoryOwnership.executeDelete(this.currentTheoryId)}this.hide()}catch(o){t.textContent=o.message||"Failed to delete theory",t.style.display="block",n.disabled=!1,e.disabled=!1,n.textContent="Delete Forever"}}showSuccess(n){const e=document.createElement("div");e.className="success-notification",e.textContent=n,e.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);\n            color: white;\n            padding: 1rem 1.5rem;\n            border-radius: 8px;\n            box-shadow: 0 8px 24px rgba(34, 197, 94, 0.4);\n            z-index: 10001;\n            animation: slideInRight 0.3s ease-out;\n        ",document.body.appendChild(e),setTimeout(()=>{e.style.animation="slideOutRight 0.3s ease-out",setTimeout(()=>e.remove(),300)},3e3)}}window.deleteConfirmationModal=new DeleteConfirmationModal,"undefined"!=typeof module&&module.exports&&(module.exports=DeleteConfirmationModal);