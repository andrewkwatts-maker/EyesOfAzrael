!function(){"use strict";const e="eoaplot-selected-theme",t="night";let n=null,s=t,a=null;async function o(){try{await async function(){const e=await fetch("/themes/theme-config.json");if(!e.ok)throw new Error(`Failed to load theme config: ${e.status}`);n=await e.json()}(),s=function(){try{return localStorage.getItem(e)}catch(e){return null}}()||n.defaultTheme||t,c(s,!1),function(){const e=document.getElementById("themeToggle");e&&e.remove();const t=document.createElement("div");t.className="theme-picker-dropdown",t.setAttribute("role","navigation"),t.setAttribute("aria-label","Theme selector");const o=document.createElement("button");o.className="icon-btn theme-picker-btn",o.setAttribute("aria-label","Select theme"),o.setAttribute("aria-haspopup","true"),o.setAttribute("aria-expanded","false");const i=n?.themes?.[s];o.textContent=i?.icon||"ðŸŽ¨",a=document.createElement("div"),a.className="theme-dropdown",a.setAttribute("role","menu"),a.style.display="none";const l={};Object.entries(n.themes).forEach(([e,t])=>{const n=t.category||"other";l[n]||(l[n]=[]),l[n].push({key:e,...t})});let r="";l.cosmic&&(r+='<div class="theme-category"><div class="theme-category-label">Cosmic</div>',l.cosmic.forEach(e=>{r+=`\n                    <button class="theme-option ${e.key===s?"active":""}"\n                            data-theme="${e.key}"\n                            role="menuitem"\n                            title="${e.description}">\n                        <span class="theme-icon">${e.icon}</span>\n                        <span class="theme-name">${e.name}</span>\n                        ${e.key===s?'<span class="theme-check">âœ“</span>':""}\n                    </button>\n                `}),r+="</div>"),l.element&&(r+='<div class="theme-category"><div class="theme-category-label">Elements</div>',l.element.forEach(e=>{r+=`\n                    <button class="theme-option ${e.key===s?"active":""}"\n                            data-theme="${e.key}"\n                            role="menuitem"\n                            title="${e.description}">\n                        <span class="theme-icon">${e.icon}</span>\n                        <span class="theme-name">${e.name}</span>\n                        ${e.key===s?'<span class="theme-check">âœ“</span>':""}\n                    </button>\n                `}),r+="</div>"),a.innerHTML=r,o.addEventListener("click",e=>{e.stopPropagation();const t="block"===a.style.display;a.style.display=t?"none":"block",o.setAttribute("aria-expanded",!t)}),a.addEventListener("click",e=>{const t=e.target.closest(".theme-option");t&&(c(t.dataset.theme,!0),a.style.display="none",o.setAttribute("aria-expanded","false"),a&&a.querySelectorAll(".theme-option").forEach(e=>{const t=e.dataset.theme===s;e.classList.toggle("active",t);const n=e.querySelector(".theme-check");if(t&&!n){const t=document.createElement("span");t.className="theme-check",t.textContent="âœ“",e.appendChild(t)}else!t&&n&&n.remove()}))}),document.addEventListener("click",e=>{t.contains(e.target)||(a.style.display="none",o.setAttribute("aria-expanded","false"))}),t.appendChild(o),t.appendChild(a);const m=document.querySelector(".header-actions");m&&m.insertBefore(t,m.firstChild)}()}catch(e){document.body.setAttribute("data-theme","night"),s="night"}}function c(a,o=!0){n&&n.themes&&n.themes[a]||(a=n?.defaultTheme||t);const c=n.themes[a],i=document.documentElement,l=document.body;o&&l.classList.add("theme-transitioning"),c.colors&&Object.entries(c.colors).forEach(([e,t])=>{i.style.setProperty(`--color-${e}`,t)}),l.setAttribute("data-theme",a),s=a,function(t){try{localStorage.setItem(e,t)}catch(e){}}(a),function(){const e=document.querySelector(".theme-picker-btn");e&&n?.themes?.[s]&&(e.textContent=n.themes[s].icon||"ðŸŽ¨")}(),o&&setTimeout(()=>{l.classList.remove("theme-transitioning")},300)}window.HeaderThemePicker={setTheme:e=>c(e,!0),getCurrentTheme:()=>s,getAvailableThemes:()=>n?Object.keys(n.themes):[]},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}();