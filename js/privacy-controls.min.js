!function(){"use strict";window.PrivacyControls=new class{constructor(){this.initialized=!1,this.consentKey="analytics_consent",this.modalId="privacy-modal"}initialize(){this.initialized||(this.hasSeenBanner()||this.showConsentBanner(),this.addFooterLink(),this.setupEventListeners(),this.initialized=!0)}hasSeenBanner(){return"true"===localStorage.getItem("consent_banner_seen")}showConsentBanner(){const n=document.createElement("div");n.id="consent-banner",n.className="consent-banner",n.innerHTML='\n        <div class="consent-content">\n          <div class="consent-text">\n            <h3>Privacy & Analytics</h3>\n            <p>We use analytics to improve your experience. Your data is anonymized and never sold.\n            <a href="#/privacy" class="privacy-link">Learn more</a></p>\n          </div>\n          <div class="consent-actions">\n            <button class="btn-secondary btn-sm" id="consent-customize">Customize</button>\n            <button class="btn-primary btn-sm" id="consent-accept">Accept</button>\n            <button class="btn-text btn-sm" id="consent-decline">Decline</button>\n          </div>\n        </div>\n      ',this.addConsentStyles(),document.body.appendChild(n),document.getElementById("consent-accept").addEventListener("click",()=>{this.acceptAnalytics(),this.hideBanner()}),document.getElementById("consent-decline").addEventListener("click",()=>{this.declineAnalytics(),this.hideBanner()}),document.getElementById("consent-customize").addEventListener("click",()=>{this.hideBanner(),this.showPrivacyModal()})}addConsentStyles(){if(document.getElementById("consent-styles"))return;const n=document.createElement("style");n.id="consent-styles",n.textContent="\n        .consent-banner {\n          position: fixed;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          background: rgba(var(--color-bg-card-rgb, 26, 31, 58), 0.98);\n          backdrop-filter: blur(20px);\n          border-top: 2px solid rgba(var(--color-primary-rgb, 139, 127, 255), 0.3);\n          padding: 1.5rem;\n          z-index: 10000;\n          box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);\n          animation: slideUp 0.3s ease-out;\n        }\n\n        @keyframes slideUp {\n          from { transform: translateY(100%); }\n          to { transform: translateY(0); }\n        }\n\n        .consent-content {\n          max-width: 1200px;\n          margin: 0 auto;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          gap: 2rem;\n        }\n\n        .consent-text h3 {\n          margin: 0 0 0.5rem 0;\n          color: var(--color-text-primary, #f8f9fa);\n          font-size: 1.1rem;\n        }\n\n        .consent-text p {\n          margin: 0;\n          color: var(--color-text-secondary, #adb5bd);\n          font-size: 0.95rem;\n        }\n\n        .privacy-link {\n          color: var(--color-primary, #8b7fff);\n          text-decoration: none;\n        }\n\n        .privacy-link:hover {\n          text-decoration: underline;\n        }\n\n        .consent-actions {\n          display: flex;\n          gap: 0.75rem;\n          flex-shrink: 0;\n        }\n\n        @media (max-width: 768px) {\n          .consent-content {\n            flex-direction: column;\n            align-items: stretch;\n          }\n\n          .consent-actions {\n            flex-direction: column;\n          }\n        }\n      ",document.head.appendChild(n)}hideBanner(){const n=document.getElementById("consent-banner");n&&(n.style.animation="slideDown 0.3s ease-in",setTimeout(()=>n.remove(),300)),localStorage.setItem("consent_banner_seen","true")}acceptAnalytics(){localStorage.setItem(this.consentKey,"true"),window.AnalyticsManager&&window.AnalyticsManager.setConsent(!0),this.showToast("Analytics enabled. Thank you!","success")}declineAnalytics(){localStorage.setItem(this.consentKey,"false"),window.AnalyticsManager&&window.AnalyticsManager.setConsent(!1),this.showToast("Analytics disabled. Your privacy is respected.","info")}addFooterLink(){const n=document.querySelector(".footer-links");if(!n)return;if(n.querySelector("#privacy-settings-link"))return;const e=document.createElement("a");e.id="privacy-settings-link",e.href="#",e.textContent="Privacy Settings",e.addEventListener("click",n=>{n.preventDefault(),this.showPrivacyModal()}),n.appendChild(e)}showPrivacyModal(){const n=document.getElementById(this.modalId);n&&n.remove();const e=localStorage.getItem(this.consentKey),t=null===e||"true"===e,i=document.createElement("div");i.id=this.modalId,i.className="modal-overlay",i.innerHTML=`\n        <div class="modal-content privacy-modal">\n          <div class="modal-header">\n            <h2>Privacy Settings</h2>\n            <button class="modal-close" aria-label="Close">&times;</button>\n          </div>\n          <div class="modal-body">\n            <div class="privacy-section">\n              <h3>Analytics & Tracking</h3>\n              <p>We use analytics to understand how you use our site and improve your experience.\n              All data is anonymized and we never sell your information.</p>\n\n              <div class="toggle-setting">\n                <label>\n                  <input type="checkbox" id="analytics-toggle" ${t?"checked":""}>\n                  <span class="toggle-label">Enable Analytics</span>\n                </label>\n                <p class="toggle-description">\n                  Helps us improve the site by tracking page views, search queries, and feature usage.\n                </p>\n              </div>\n            </div>\n\n            <div class="privacy-section">\n              <h3>What We Track</h3>\n              <ul class="privacy-list">\n                <li><strong>Page Views:</strong> Which pages you visit</li>\n                <li><strong>Search Queries:</strong> What you search for (to improve results)</li>\n                <li><strong>Interactions:</strong> Buttons clicked, features used</li>\n                <li><strong>Performance:</strong> Load times, errors</li>\n                <li><strong>Device Info:</strong> Browser, OS, screen size</li>\n              </ul>\n            </div>\n\n            <div class="privacy-section">\n              <h3>What We DON'T Track</h3>\n              <ul class="privacy-list">\n                <li>Personal information (names, addresses, etc.)</li>\n                <li>Content of your contributions</li>\n                <li>Precise location (GPS)</li>\n                <li>Cross-site browsing history</li>\n              </ul>\n            </div>\n\n            <div class="privacy-section">\n              <h3>Your Data Rights</h3>\n              <p>You have the right to:</p>\n              <ul class="privacy-list">\n                <li>Access your data</li>\n                <li>Request deletion</li>\n                <li>Opt out of tracking</li>\n                <li>Export your data</li>\n              </ul>\n              <p>\n                <a href="#/privacy" class="privacy-link">Read our full Privacy Policy</a>\n              </p>\n            </div>\n          </div>\n          <div class="modal-footer">\n            <button class="btn-secondary" id="privacy-cancel">Cancel</button>\n            <button class="btn-primary" id="privacy-save">Save Preferences</button>\n          </div>\n        </div>\n      `,document.body.appendChild(i),i.querySelector(".modal-close").addEventListener("click",()=>this.hideModal()),i.querySelector("#privacy-cancel").addEventListener("click",()=>this.hideModal()),i.querySelector("#privacy-save").addEventListener("click",()=>{document.getElementById("analytics-toggle").checked?this.acceptAnalytics():this.declineAnalytics(),this.hideModal()}),i.addEventListener("click",n=>{n.target===i&&this.hideModal()});const o=n=>{"Escape"===n.key&&(this.hideModal(),document.removeEventListener("keydown",o))};document.addEventListener("keydown",o),this.addModalStyles()}hideModal(){const n=document.getElementById(this.modalId);n&&n.remove()}addModalStyles(){if(document.getElementById("privacy-modal-styles"))return;const n=document.createElement("style");n.id="privacy-modal-styles",n.textContent='\n        .privacy-modal {\n          max-width: 600px;\n          max-height: 80vh;\n          overflow-y: auto;\n        }\n\n        .privacy-section {\n          margin: 1.5rem 0;\n          padding-bottom: 1.5rem;\n          border-bottom: 1px solid rgba(var(--color-border-primary-rgb, 42, 47, 74), 0.5);\n        }\n\n        .privacy-section:last-child {\n          border-bottom: none;\n        }\n\n        .privacy-section h3 {\n          margin: 0 0 0.75rem 0;\n          color: var(--color-text-primary, #f8f9fa);\n          font-size: 1.1rem;\n        }\n\n        .privacy-section p {\n          margin: 0.5rem 0;\n          color: var(--color-text-secondary, #adb5bd);\n          line-height: 1.6;\n        }\n\n        .privacy-list {\n          margin: 0.75rem 0;\n          padding-left: 1.5rem;\n          color: var(--color-text-secondary, #adb5bd);\n        }\n\n        .privacy-list li {\n          margin: 0.5rem 0;\n          line-height: 1.6;\n        }\n\n        .toggle-setting {\n          background: rgba(var(--color-bg-secondary-rgb, 21, 26, 53), 0.5);\n          padding: 1rem;\n          border-radius: 8px;\n          margin: 1rem 0;\n        }\n\n        .toggle-setting label {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n          cursor: pointer;\n          font-weight: 500;\n        }\n\n        .toggle-setting input[type="checkbox"] {\n          width: 20px;\n          height: 20px;\n          cursor: pointer;\n        }\n\n        .toggle-description {\n          margin: 0.5rem 0 0 2.25rem;\n          font-size: 0.9rem;\n          color: var(--color-text-secondary, #adb5bd);\n        }\n      ',document.head.appendChild(n)}setupEventListeners(){window.addEventListener("hashchange",()=>{"#/privacy-settings"===window.location.hash&&this.showPrivacyModal()})}showToast(n,e="info"){window.showToast&&window.showToast(n,e)}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.PrivacyControls.initialize()}):window.PrivacyControls.initialize()}();