<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Greek Mythology - World Mythos Explorer</title>

    <!-- Base Theme System -->
    <link rel="stylesheet" href="../../themes/theme-base.css">
    <link rel="stylesheet" href="../../styles.css">
    <link rel="stylesheet" href="../../themes/corpus-links.css">
    <link rel="stylesheet" href="../../themes/smart-links.css">

    <!-- Firebase Theme System -->
    <link rel="stylesheet" href="/css/firebase-themes.css">

    <!-- Theme Scripts -->
    <script defer src="../../themes/theme-picker.js"></script>
    <script defer src="../../themes/theme-animations.js"></script>
    <script defer src="../../themes/smart-links.js"></script>

    <!-- Submission Link System -->
    <script src="../../js/submission-context.js"></script>
    <script src="../../js/components/submission-link.js"></script>
    <link rel="stylesheet" href="../../css/submission-link.css">

    <!-- Firebase Auth System -->
    <link rel="stylesheet" href="../../css/user-auth.css">
    <script src="../../js/firebase-auth.js"></script>
    <script src="../../js/auth-guard.js"></script>
    <script src="../../js/components/google-signin-button.js"></script>

    <style>
        /* ============================================
           FIREBASE-ENHANCED MYTHOLOGY INDEX TEMPLATE
           Combines existing styles with Firebase integration
           ============================================ */

        /* Breadcrumb - Full-width bar attached below header */
        .breadcrumb {
            position: sticky;
            top: 60px;
            left: 0;
            width: 100%;
            z-index: 999;
            background: rgba(var(--color-surface-rgb), 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            padding: var(--spacing-xs) var(--spacing-lg);
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            border-bottom: 1px solid rgba(var(--color-primary-rgb), 0.15);
        }

        .breadcrumb a {
            color: var(--color-primary);
            text-decoration: none;
            transition: all var(--transition-fast);
        }

        .breadcrumb a:hover {
            color: var(--color-secondary);
            text-decoration: underline;
        }

        /* Hero Section - Modern Glass Styling */
        .hero-section {
            background: linear-gradient(135deg,
                rgba(var(--color-primary-rgb), 0.8),
                rgba(var(--color-secondary-rgb), 0.8));
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 2px solid var(--color-primary);
            color: var(--color-text-primary);
            padding: 3rem 2rem;
            text-align: center;
            border-radius: var(--radius-xl);
            margin-bottom: 2rem;
            box-shadow: var(--shadow-xl);
        }

        .hero-icon-display {
            font-size: 5rem;
            margin-bottom: var(--spacing-md);
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        .hero-description {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 1rem auto;
            line-height: 1.7;
        }

        /* Glass Card - With Hover Animation */
        .glass-card {
            background: rgba(var(--color-surface-rgb), 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(var(--color-primary-rgb), 0.2);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin: 2rem 0;
            box-shadow: var(--shadow-lg);
            transition: all var(--transition-base, 0.3s ease);
        }

        .glass-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-xl), 0 0 20px rgba(var(--color-primary-rgb), 0.15);
            border-color: rgba(var(--color-primary-rgb), 0.4);
        }

        /* Firebase Content Sections */
        .firebase-section {
            margin: 3rem 0;
        }

        .section-header {
            color: var(--color-primary);
            margin-bottom: var(--spacing-lg);
            font-size: 2rem;
            font-weight: 700;
        }

        /* Grid Layouts */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .deity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
        }

        /* Loading States */
        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 300px;
            gap: var(--spacing-md);
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--theme-primary, var(--color-primary));
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: white;
            font-size: 1.1rem;
            text-align: center;
        }

        /* Static Content (preserved from original) */
        .static-content {
            margin: 2rem 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .content-grid {
                grid-template-columns: 1fr;
            }

            .deity-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .hero-section {
                padding: 2rem 1rem;
            }

            .hero-icon-display {
                font-size: 3rem;
            }

            .breadcrumb {
                font-size: var(--font-size-xs);
                padding: var(--spacing-xs) var(--spacing-md);
                top: 50px;
            }
        }
    </style>

    <link rel="stylesheet" href="/css/editable-panels.css">
</head>
<body data-theme="greek">
    <!-- Theme Picker Container -->
    <div id="theme-picker"></div>
    <div id="theme-picker-container"></div>

    <!-- Header -->
    <header>
        <div class="header-content">
            <h1>‚ö° Greek Mythology</h1>
            <div id="user-auth-nav"></div>
        </div>
    </header>

    <!-- Breadcrumb -->
    <nav class="breadcrumb" aria-label="Breadcrumb">
        <a href="../../mythos/index.html">Home</a> ‚Üí
        <span aria-current="page">Greek Mythology</span>
    </nav>

    <main>
        <!-- Hero Section -->
        <div class="hero-section">
            <div class="hero-icon-display">‚ö°</div>
            <h2>Greek Mythology</h2>
            <p class="hero-description">
                Explore the rich tapestry of Greek mythology, from the heights of Mount Olympus to the depths of Tartarus. Discover the twelve Olympians, legendary heroes, fearsome creatures, and the mysteries that shaped Western civilization for over a millennium.
            </p>
        </div>

        <!-- ============================================
             FIREBASE-LOADED DYNAMIC CONTENT SECTIONS
             These sections load from Firestore
             ============================================ -->

        <!-- ============================================
             OLYMPIAN PANTHEON - STATIC CONTENT
             Preserved from original for quick navigation
             ============================================ -->
        <section style="margin-top: var(--spacing-xl, 3rem);">
            <h2 class="section-header">‚ö° The Olympian Pantheon</h2>
            <p style="margin-bottom: var(--spacing-lg); line-height: 1.7; color: rgba(255, 255, 255, 0.9);">
                The twelve great gods who dwelt upon <a href="cosmology/mount-olympus.html" style="color: var(--color-primary);">Mount Olympus</a>, ruling over the cosmos and interfering in the affairs
                of mortals. Each Olympian commanded unique domains and wielded divine powers that shaped the Greek world.
            </p>

            <div class="glass-card" style="margin-bottom: var(--spacing-lg);">
                <h3 class="card-title" style="color: var(--color-primary); margin-top: 0;">üëë The Twelve Olympians</h3>
                <p style="margin-bottom: var(--spacing-lg); line-height: 1.7;">
                    The principal deities of the Greek pantheon, dwelling atop Mount Olympus and ruling over all creation.
                    From <a href="deities/zeus.html" style="color: var(--color-primary);">Zeus</a> the Sky Father to <a href="deities/dionysus.html" style="color: var(--color-primary);">Dionysus</a> the God of Ecstasy, each brings unique powers and personality.
                </p>
                <div class="deity-grid">
                    <a class="btn btn-secondary" href="deities/zeus.html" style="text-align: center;">‚ö° Zeus (King)</a>
                    <a class="btn btn-secondary" href="deities/hera.html" style="text-align: center;">üëë Hera (Queen)</a>
                    <a class="btn btn-secondary" href="deities/poseidon.html" style="text-align: center;">üåä Poseidon (Sea)</a>
                    <a class="btn btn-secondary" href="deities/athena.html" style="text-align: center;">ü¶â Athena (Wisdom)</a>
                    <a class="btn btn-secondary" href="deities/apollo.html" style="text-align: center;">‚òÄÔ∏è Apollo (Sun)</a>
                    <a class="btn btn-secondary" href="deities/artemis.html" style="text-align: center;">üèπ Artemis (Hunt)</a>
                    <a class="btn btn-secondary" href="deities/ares.html" style="text-align: center;">‚öîÔ∏è Ares (War)</a>
                    <a class="btn btn-secondary" href="deities/aphrodite.html" style="text-align: center;">üíò Aphrodite (Love)</a>
                    <a class="btn btn-secondary" href="deities/hephaestus.html" style="text-align: center;">üî® Hephaestus (Forge)</a>
                    <a class="btn btn-secondary" href="deities/hermes.html" style="text-align: center;">üì® Hermes (Messenger)</a>
                    <a class="btn btn-secondary" href="deities/demeter.html" style="text-align: center;">üåæ Demeter (Harvest)</a>
                    <a class="btn btn-secondary" href="deities/dionysus.html" style="text-align: center;">üçá Dionysus (Wine)</a>
                </div>
            </div>

            <div class="glass-card" style="margin-bottom: var(--spacing-lg);">
                <h3 class="card-title" style="color: var(--color-primary); margin-top: 0;">üèõÔ∏è <a href="deities/hades.html" style="color: var(--color-primary);">Hades - Lord of the Underworld</a></h3>
                <p style="line-height: 1.7;">
                    Though not counted among the Twelve Olympians (he dwells in the <a href="cosmology/underworld.html" style="color: var(--color-primary);">Underworld</a>, not Olympus), Hades is
                    one of the three great brothers who divided the cosmos. Ruler of the dead and keeper of hidden wealth.
                </p>
            </div>

            <div class="glass-card" style="margin-bottom: var(--spacing-lg);">
                <h3 class="card-title" style="color: var(--color-primary); margin-top: 0;">üåç <a href="cosmology/titans.html" style="color: var(--color-primary);">The Titans - Elder Gods</a></h3>
                <p style="margin-bottom: var(--spacing-lg); line-height: 1.7;">
                    The generation of deities before the Olympians. Born of Gaia (Earth) and Uranus (Sky), they ruled
                    during the Golden Age before being overthrown by Zeus and his siblings in the Titanomachy.
                </p>
                <div class="button-grid" style="display: flex; flex-wrap: wrap; gap: var(--spacing-md);">
                    <a class="btn btn-secondary" href="cosmology/titans.html#kronos">Kronos (Time)</a>
                    <a class="btn btn-secondary" href="cosmology/titans.html#rhea">Rhea (Mother)</a>
                    <a class="btn btn-secondary" href="cosmology/titans.html#prometheus">Prometheus (Forethought)</a>
                    <a class="btn btn-secondary" href="cosmology/titans.html#atlas">Atlas (Endurance)</a>
                </div>
            </div>

            <div class="glass-card">
                <h3 class="card-title" style="color: var(--color-primary); margin-top: 0;">üåå <a href="cosmology/primordials.html" style="color: var(--color-primary);">The Primordial Deities</a></h3>
                <p style="line-height: 1.7;">
                    The first beings to emerge from the void - Chaos, Gaia (Earth), Tartarus (Abyss), Eros (Love),
                    Erebus (Darkness), and Nyx (Night). The fundamental forces that birthed all existence.
                </p>
            </div>
        </section>

        <!-- ============================================
             FIREBASE-LOADED DYNAMIC CONTENT SECTIONS
             These sections load from Firestore with grid layouts
             ============================================ -->

        <!-- Deities Section (Firebase) -->
        <section class="firebase-section">
            <h2 class="section-header">‚ö° All Deities (Firebase Collection)</h2>
            <div id="deities-loading" class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading deities from Firebase...</p>
            </div>
            <div id="deities-container" class="content-grid" style="display: none;"></div>
        </section>

        <!-- Heroes Section -->
        <section class="firebase-section">
            <h2 class="section-header">ü¶∏ Heroes & Legendary Mortals</h2>
            <div id="heroes-loading" class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading heroes from Firebase...</p>
            </div>
            <div id="heroes-container" class="content-grid" style="display: none;"></div>
        </section>

        <!-- Creatures Section -->
        <section class="firebase-section">
            <h2 class="section-header">üêâ Creatures & Monsters</h2>
            <div id="creatures-loading" class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading creatures from Firebase...</p>
            </div>
            <div id="creatures-container" class="content-grid" style="display: none;"></div>
        </section>

        <!-- Places Section (Cosmology) -->
        <section class="firebase-section">
            <h2 class="section-header">üåå Sacred Places & Cosmology</h2>
            <div id="places-loading" class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading places from Firebase...</p>
            </div>
            <div id="places-container" class="content-grid" style="display: none;"></div>
        </section>

        <!-- Items Section -->
        <section class="firebase-section">
            <h2 class="section-header">‚öîÔ∏è Sacred Items & Artifacts</h2>
            <div id="items-loading" class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading items from Firebase...</p>
            </div>
            <div id="items-container" class="content-grid" style="display: none;"></div>
        </section>

        <!-- Myths Section -->
        <section class="firebase-section">
            <h2 class="section-header">üìñ Myths & Legends</h2>
            <div id="myths-loading" class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading myths from Firebase...</p>
            </div>
            <div id="myths-container" class="content-grid" style="display: none;"></div>
        </section>

        <!-- Concepts Section -->
        <section class="firebase-section">
            <h2 class="section-header">üí≠ Mystical Concepts</h2>
            <div id="concepts-loading" class="loading-container">
                <div class="loading-spinner"></div>
                <p class="loading-text">Loading concepts from Firebase...</p>
            </div>
            <div id="concepts-container" class="content-grid" style="display: none;"></div>
        </section>

        <!-- ============================================
             STATIC RESOURCE SECTIONS
             Preserved from original
             ============================================ -->
        <section style="margin-top: var(--spacing-xl, 3rem);">
            <h2 class="section-header">üåø Sacred Plants & Herbalism</h2>
            <div class="glass-card">
                <h3 class="card-title" style="color: var(--color-primary); margin-top: 0;">üçÉ <a href="herbs/index.html" style="color: var(--color-primary);">Sacred & Medicinal Plants</a></h3>
                <p style="margin-bottom: var(--spacing-lg); line-height: 1.7;">
                    The plants sacred to the gods and used in ritual, healing, and magic. Each deity has their favored
                    herbs, and many myths tell of botanical transformations and divine gardens.
                </p>
                <div class="button-grid" style="display: flex; flex-wrap: wrap; gap: var(--spacing-md);">
                    <a class="btn btn-secondary" href="herbs/laurel.html">Laurel (Apollo)</a>
                    <a class="btn btn-secondary" href="herbs/olive.html">Olive (Athena)</a>
                    <a class="btn btn-secondary" href="herbs/myrtle.html">Myrtle (Aphrodite)</a>
                    <a class="btn btn-secondary" href="herbs/oak.html">Oak (Zeus)</a>
                    <a class="btn btn-secondary" href="herbs/pomegranate.html">Pomegranate (Persephone)</a>
                </div>
            </div>
        </section>

        <section style="margin-top: var(--spacing-xl, 3rem);">
            <h2 class="section-header">üîÆ Mysteries, Rituals & Magic</h2>
            <div class="glass-card" style="margin-bottom: var(--spacing-lg);">
                <h3 class="card-title" style="color: var(--color-primary); margin-top: 0;">üïØÔ∏è <a href="rituals/index.html" style="color: var(--color-primary);">Ritual Practices</a></h3>
                <p style="margin-bottom: var(--spacing-lg); line-height: 1.7;">
                    The ceremonies, festivals, and sacred rites that connected mortals with the divine. From the
                    Olympic Games to the Eleusinian Mysteries, ritual was the heart of Greek religion.
                </p>
                <div class="button-grid" style="display: flex; flex-wrap: wrap; gap: var(--spacing-md);">
                    <a class="btn btn-secondary" href="rituals/eleusinian-mysteries.html">Eleusinian Mysteries</a>
                    <a class="btn btn-secondary" href="rituals/dionysian-rites.html">Dionysian Rites</a>
                    <a class="btn btn-secondary" href="rituals/olympic-games.html">Olympic Games</a>
                    <a class="btn btn-secondary" href="rituals/offerings.html">Offerings & Sacrifices</a>
                </div>
            </div>

            <div class="glass-card" style="margin-bottom: var(--spacing-lg);">
                <h3 class="card-title" style="color: var(--color-primary); margin-top: 0;">‚ú® <a href="magic/index.html" style="color: var(--color-primary);">Magical Traditions</a></h3>
                <p style="margin-bottom: var(--spacing-lg); line-height: 1.7;">
                    The esoteric arts of Greek magic - from Orphic mysteries to Hermetic wisdom, from necromancy
                    to the magical use of sacred plants (pharmakeia).
                </p>
                <div class="button-grid" style="display: flex; flex-wrap: wrap; gap: var(--spacing-md);">
                    <a class="btn btn-secondary" href="magic/index.html">Explore Magical Traditions</a>
                </div>
            </div>

            <div class="glass-card">
                <h3 class="card-title" style="color: var(--color-primary); margin-top: 0;">ü™ú <a href="path/index.html" style="color: var(--color-primary);">The Mystery Path - Spiritual Ascension</a></h3>
                <p style="margin-bottom: var(--spacing-lg); line-height: 1.7;">
                    The 6-stage journey from initiate (Mystes) to master (Mystagogos), following the progression
                    used in the Eleusinian and other mystery cults. A 20-30 year path of spiritual transformation.
                </p>
                <div class="button-grid" style="display: flex; flex-wrap: wrap; gap: var(--spacing-md);">
                    <a class="btn btn-secondary" href="path/index.html">Explore the Mystery Path</a>
                </div>
            </div>
        </section>

        <section style="margin-top: var(--spacing-xl, 3rem);">
            <h2 class="section-header">üìö Other Greek Sections</h2>
            <div class="section-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-lg);">
                <div class="glass-card clickable-card" onclick="window.location.href='texts/index.html'" role="button" tabindex="0" style="cursor: pointer;">
                    <h3 class="card-title" style="color: var(--color-primary); margin-top: 0;">üìú Sacred Texts</h3>
                    <p style="line-height: 1.7;">Homer's Iliad & Odyssey, Hesiod's Theogony, Homeric Hymns, Orphic Hymns, and the works of the great tragedians.</p>
                </div>
                <div class="glass-card clickable-card" onclick="window.location.href='symbols/index.html'" role="button" tabindex="0" style="cursor: pointer;">
                    <h3 class="card-title" style="color: var(--color-primary); margin-top: 0;">üî± Sacred Symbols</h3>
                    <p style="line-height: 1.7;">Zeus's thunderbolt, Poseidon's trident, Athena's owl, Apollo's lyre, and other divine emblems.</p>
                </div>
            </div>
        </section>

        <section style="margin-top: var(--spacing-xl, 3rem);">
            <h2 class="section-header">üìñ Primary Sources</h2>
            <ul style="list-style: none; padding-left: 0;">
                <li style="padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(var(--color-primary-rgb), 0.15);"><strong><a href="texts/index.html">Homer's Iliad & Odyssey</a></strong> - Epic poems of the Trojan War and Odysseus's journey (8th century BCE)</li>
                <li style="padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(var(--color-primary-rgb), 0.15);"><strong><a href="texts/index.html">Hesiod's Theogony</a></strong> - The genealogy of the gods and creation of the cosmos (8th-7th century BCE)</li>
                <li style="padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(var(--color-primary-rgb), 0.15);"><strong><a href="texts/index.html">Hesiod's Works and Days</a></strong> - Agricultural wisdom and the Five Ages of Man (8th-7th century BCE)</li>
                <li style="padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(var(--color-primary-rgb), 0.15);"><strong><a href="texts/index.html">Homeric Hymns</a></strong> - Sacred hymns to the Olympian deities (7th-6th century BCE)</li>
                <li style="padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(var(--color-primary-rgb), 0.15);"><strong><a href="texts/index.html">Orphic Hymns</a></strong> - Mystery tradition hymns to gods and cosmic forces (3rd century BCE - 2nd century CE)</li>
                <li style="padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(var(--color-primary-rgb), 0.15);"><strong><a href="texts/index.html">Greek Tragedies</a></strong> - Works of Aeschylus, Sophocles, and Euripides (5th century BCE)</li>
                <li style="padding: var(--spacing-md) 0; border-bottom: 1px solid rgba(var(--color-primary-rgb), 0.15);"><strong><a href="texts/index.html">Apollodorus's Bibliotheca</a></strong> - Comprehensive mythological handbook (1st-2nd century CE)</li>
                <li style="padding: var(--spacing-md) 0;"><strong><a href="texts/index.html">Ovid's Metamorphoses</a></strong> - Roman retelling of Greek myths (1st century CE)</li>
            </ul>
        </section>

        <!-- Cross-Cultural Parallels Section -->
        <section class="interlink-panel" style="margin-top: var(--spacing-xl, 3rem);">
            <h3 class="interlink-header">
                <span class="interlink-icon">üåç</span>
                Cross-Cultural Parallels
            </h3>
            <p style="margin-bottom: var(--spacing-lg); color: var(--color-text-secondary);">
                Explore how Greek mythology connects with other world traditions through shared themes and archetypes.
            </p>
            <div class="parallel-grid">
                <!-- Parallel mythology links will be added here -->
            </div>
        </section>

        <!-- Related Traditions -->
        <section style="margin-top: var(--spacing-xl, 3rem);">
            <h2 class="section-header">üîó Related Traditions</h2>
            <div class="glass-card">
                <h3>Explore Other Mythologies</h3>
                <div class="button-grid" style="display: flex; flex-wrap: wrap; gap: var(--spacing-md);">
                    <a class="btn btn-secondary" href="../greek/index.html">Greek</a>
                    <a class="btn btn-secondary" href="../roman/index.html">Roman</a>
                    <a class="btn btn-secondary" href="../norse/index.html">Norse</a>
                    <a class="btn btn-secondary" href="../egyptian/index.html">Egyptian</a>
                    <a class="btn btn-secondary" href="../hindu/index.html">Hindu</a>
                    <a class="btn btn-secondary" href="../buddhist/index.html">Buddhist</a>
                    <a class="btn btn-secondary" href="../celtic/index.html">Celtic</a>
                    <a class="btn btn-secondary" href="../christian/index.html">Christian</a>
                    <a class="btn btn-secondary" href="../islamic/index.html">Islamic</a>
                    <a class="btn btn-secondary" href="../jewish/index.html">Jewish</a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>
            <strong>Greek Mythology</strong> - World Mythos Explorer<br>
            <a href="../../mythos/index.html">Back to World Mythos Home</a> |
            <a href="../../index.html">Main Site</a>
        </p>
    </footer>

    <!-- Auto-inject submission button -->
    <script>
        if (window.SubmissionLink) {
            window.SubmissionLink.autoInject();
        }
    </script>

    <!-- Firebase SDK (CDN) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <!-- Firebase Configuration -->
    <script src="../../firebase-config.js"></script>

    <!-- Firebase Content Loader (Module) -->
    <script type="module">
        import { FirebaseContentLoader } from '/js/firebase-content-loader.js';

        // Wait for Firebase to initialize
        window.addEventListener('load', async () => {
            try {
                // Check if Firebase is initialized
                if (!window.firebaseApp || !window.firebaseDb) {
                    console.error('[Index] Firebase not initialized');
                    showGlobalError('Firebase is not configured. Please check firebase-config.js');
                    return;
                }

                console.log('[Index] Initializing Firebase Content Loader for greek');

                // Create content loader instance
                const loader = new FirebaseContentLoader(window.firebaseApp);
                const mythology = 'greek'; // e.g., 'greek', 'norse', 'egyptian'

                // Content types to load (matching Firebase collections and container IDs)
                const contentTypes = [
                    { type: 'deities', container: 'deities-container', loading: 'deities-loading' },
                    { type: 'heroes', container: 'heroes-container', loading: 'heroes-loading' },
                    { type: 'creatures', container: 'creatures-container', loading: 'creatures-loading' },
                    { type: 'places', container: 'places-container', loading: 'places-loading' },
                    { type: 'items', container: 'items-container', loading: 'items-loading' },
                    { type: 'myths', container: 'myths-container', loading: 'myths-loading' },
                    { type: 'concepts', container: 'concepts-container', loading: 'concepts-loading' }
                ];

                // Load each content type
                for (const { type, container, loading } of contentTypes) {
                    try {
                        console.log(`[Index] Loading ${type} for ${mythology}...`);

                        // Load content filtered by mythology
                        await loader.loadContent(type, { mythology: mythology });

                        // Hide loading, show container
                        const loadingEl = document.getElementById(loading);
                        const containerEl = document.getElementById(container);

                        if (loadingEl) loadingEl.style.display = 'none';
                        if (containerEl) containerEl.style.display = 'grid';

                        // Render content
                        loader.renderContent(container, type);

                        console.log(`[Index] ‚úì ${type} loaded successfully`);

                    } catch (error) {
                        console.error(`[Index] Error loading ${type}:`, error);

                        // Hide loading, show error
                        const loadingEl = document.getElementById(loading);
                        const containerEl = document.getElementById(container);

                        if (loadingEl) {
                            loadingEl.innerHTML = `
                                <div class="error-container">
                                    <div class="error-title">Failed to load ${type}</div>
                                    <div class="error-message">${error.message}</div>
                                </div>
                            `;
                        }
                    }
                }

                console.log('[Index] All content loaded successfully');

            } catch (error) {
                console.error('[Index] Fatal error:', error);
                showGlobalError('Failed to load content: ' + error.message);
            }
        });

        function showGlobalError(message) {
            document.querySelectorAll('.loading-container').forEach(el => {
                el.innerHTML = `
                    <div class="error-container">
                        <div class="error-title">Error</div>
                        <div class="error-message">${message}</div>
                    </div>
                `;
            });
        }
    </script>

    <!-- Initialize Auth UI -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Google Sign-In button in header
            if (window.GoogleSignInButton) {
                const authNav = document.getElementById('user-auth-nav');
                if (authNav) {
                    window.GoogleSignInButton.injectIntoElement(authNav, {
                        showUserInfo: true,
                        showAvatar: true,
                        compact: true
                    });
                }
            }
        });
    </script>

    <script src="/js/editable-panel-system.js"></script>


    <!-- Initialize Editable Panel System -->
    <script>
        // Wait for Firebase and content to load
        window.addEventListener('load', () => {
            // Give Firebase content loader time to render cards
            setTimeout(() => {
                if (typeof EditablePanelSystem === 'undefined') {
                    console.warn('[EditablePanels] EditablePanelSystem not loaded');
                    return;
                }

                if (!window.firebaseApp) {
                    console.warn('[EditablePanels] Firebase not initialized');
                    return;
                }

                console.log('[EditablePanels] Initializing editable panel system...');

                // Initialize the system
                const editableSystem = new EditablePanelSystem(window.firebaseApp);

                // Store globally for access
                window.editableSystem = editableSystem;

                // Initialize all rendered content cards
                const contentCards = document.querySelectorAll('.content-card[data-id]');

                contentCards.forEach(card => {
                    const documentId = card.getAttribute('data-id');

                    // Determine collection type from parent section
                    let collection = 'deities';
                    let contentType = 'deity';

                    const parentSection = card.closest('.firebase-section');
                    if (parentSection) {
                        const containerId = parentSection.querySelector('[id$="-container"]')?.id;
                        if (containerId) {
                            const type = containerId.replace('-container', '');
                            collection = type;
                            contentType = type.slice(0, -1); // Remove plural 's'
                        }
                    }

                    // Initialize editable panel
                    editableSystem.initEditablePanel(card, {
                        contentType: contentType,
                        documentId: documentId,
                        collection: collection,
                        canEdit: false, // Will be determined by checking user ownership
                        canSubmitAppendment: true
                    });
                });

                console.log(`[EditablePanels] Initialized ${contentCards.length} editable panels`);
            }, 2000); // Wait 2 seconds for content to load
        });
    </script>
</body>
</html>
